// ==UserScript==
// @name         CoreTabs
// @namespace    https://github.com/diasbaskara/ct
// @version      1.0.0
// @description  Enhanced CoreTabs userscript with modular architecture
// @author       diasbaskara
// @match        https://coretax.intranet.pajak.go.id/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pajak.go.id
// @homepage     https://github.com/diasbaskara/ct
// @supportURL   https://github.com/diasbaskara/ct/issues
// @updateURL    https://cdn.jsdelivr.net/gh/diasbaskara/ct@main/cdn/latest/coretabs.meta.js
// @downloadURL  https://cdn.jsdelivr.net/gh/diasbaskara/ct@main/cdn/latest/coretabs.user.js
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_deleteValue

// ==/UserScript==
(()=>{"use strict";const e=new class{constructor(){this.state={allMyCases:[],allCaseDocuments:[],allCaseUsers:[],refundReviewData:[],filteredRefundData:[],selectedCaseId:null,loadedDocsForCaseId:null,loadedUsersForCaseId:null,loadedProfileForCaseId:null,loadedRoutingForCaseId:null,routingData:null,workflowDiagram:null,currentScreen:"my-cases",currentTab:"my-cases",sidebarOpen:!1},this.listeners={}}get(e){return this.state[e]}set(e,n){const r=this.state[e];this.state[e]=n,this.listeners[e]&&this.listeners[e].forEach(e=>{try{e(n,r)}catch(e){}})}subscribe(e,n){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n),()=>{const r=this.listeners[e].indexOf(n);r>-1&&this.listeners[e].splice(r,1)}}getAll(){return{...this.state}}clear(){this.state={allMyCases:[],allCaseDocuments:[],allCaseUsers:[],refundReviewData:[],filteredRefundData:[],selectedCaseId:null,loadedDocsForCaseId:null,loadedUsersForCaseId:null,loadedProfileForCaseId:null,loadedRoutingForCaseId:null,routingData:null,workflowDiagram:null,currentScreen:"my-cases",currentTab:"my-cases",sidebarOpen:!1},this.listeners={}}notify(e,n){this.listeners[e]&&this.listeners[e].forEach(e=>{try{e(n)}catch(e){}})}},n="cats-angular-clientuser:https://coretax.intranet.pajak.go.id/identityprovider:cats-angular-client",r="In Progress",a="coretabs-language",t={CASES:"https://coretax.intranet.pajak.go.id/casemanagement/api/caselist/mycases",DOCUMENTS:"https://coretax.intranet.pajak.go.id/documentmanagement/api/casedocument/list",USERS:"https://coretax.intranet.pajak.go.id/casemanagement/api/caseuser/list",PROFILE:"https://coretax.intranet.pajak.go.id/casemanagement/api/generalinformation/view",ROUTING:"https://coretax.intranet.pajak.go.id/casemanagement/api/caserouting/view",DOWNLOAD:"https://coretax.intranet.pajak.go.id/documentmanagement/api/download"};function o(){const e=localStorage.getItem(n);if(e)try{const n=JSON.parse(e);return n.access_token||n.accessToken}catch(e){return null}return null}function s(e=null){const n=o(),r={"Content-Type":"application/json",Accept:"application/json"};return n&&(r.Authorization=`Bearer ${n}`),e&&(r["X-Case-Url"]=e),r}const i={my_cases:"My Cases",case_details:"Case Details",back:"← Back",no_case_selected:"No Case Selected",select_case_message:'Please select a case from the "My Cases" screen',select_case_tab_message:'Please select a case from the "My Cases" tab',profile:"Profile",documents:"Documents",users:"Users",refund_review:"Refund Review",case_documents:"Case Documents",case_users:"Case Users",routing:"Routing",open:"Open",docs:"Docs",download:"Download",downloading:"Downloading...",print:"Print",printing:"Printing...",print_failed:"Print failed",reload:"Reload",reload_page:"Reload Page",collapse_all:"Collapse All",expand_all:"Expand All",download_excel:"Download Excel",coretabs:"CoreTabs",filter_by_status:"Filter by Status:",filter_by_role:"Filter by Role:",filter_by_reported:"Filter by Reported:",show_all:"Show All",yes:"Yes",no:"No",case_number:"Case Number",taxpayer_name_tin:"Taxpayer Name & TIN",case_type:"Case Type",status:"Status",created_date:"Created Date",actions:"Actions",letter_number:"Letter Number",file_name:"File Name",date:"Date",full_name:"Full Name",nip:"NIP",position:"Position",office_name:"Office Name",doc_number:"Doc Number",selling_price:"Selling Price",vat_paid:"VAT Paid",stlg_paid:"STLG Paid",trans_code:"Trans Code",reported:"Reported",case_role:"Case Role",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected",taxpayer:"Taxpayer",tax_officer:"Tax Officer",supervisor:"Supervisor",head_of_regional_office:"Head of Regional Office","head_of_division_of_audit,_collection,_intelligence,_and_investigation":"Head of Division of Audit, Collection, Intelligence, and Investigation","head_of_section_of_preliminary_investigation_&_investigation_administration":"Head of Section of Preliminary Investigation & Investigation Administration",digital_forensic_team_member:"Digital Forensic Team Member",digital_forensic_team_leader:"Digital Forensic Team Leader",loading:"Loading...",loading_my_cases:"Loading my cases...",loading_documents:"Loading documents...",loading_users:"Loading users...",loading_profile:"Loading profile information...",loading_routing:"Loading routing information...",loading_profile_name:"Loading...",loading_profile_email:"Loading...",no_cases_match:"No cases match the selected filter.",no_documents_found:"No documents found or match the selected filter.",no_users_found:"No users found or match the selected filter.",no_refund_data:"No refund review data matches the filter.",profile_not_available:"Profile not available",please_log_in:"Please log in",error_loading_profile:"Error loading profile",please_reload:"Please reload",download_failed:"Download failed",case_must_be_selected:"A case must be selected.",select_case_for_documents:"Please select a case to view its documents.",select_case_for_users:"Please select a case to view its users.",select_case_for_profile:"Please select a case to view its profile information.",select_case_for_routing:"Please select a case to view its routing information.",select_refund_case:'Select a refund case and click "Refund Review" in the header or row.',step_1_3_fetching_subprocess:"Step 1/3: Fetching Sub Process ID...",step_2_3_fetching_reference:"Step 2/3: Fetching reference number...",step_3_3_fetching_refund:"Step 3/3: Fetching refund details...",registration_date:"Registration Date",email_address:"Email Address",telephone_number:"Telephone Number",tax_region:"Tax Region",tax_office:"Tax Office",tax_office_address:"Tax Office Address",tax_office_phone:"Tax Office Phone Number",description:"Description",business_classification:"Business Classification",tax_period:"Tax Period",tax_year:"Tax Year",last_modified:"Last Modified",created_by:"Created By",na:"N/A",error_occurred:"An error occurred:",language:"Language"},d={my_cases:"Kasus Saya",case_details:"Detail Kasus",back:"← Kembali",no_case_selected:"Tidak Ada Kasus Dipilih",select_case_message:'Silakan pilih kasus dari layar "Kasus Saya"',select_case_tab_message:'Silakan pilih kasus dari tab "Kasus Saya"',profile:"Profil",documents:"Dokumen",users:"Pengguna",refund_review:"Tinjauan Restitusi",case_documents:"Dokumen Kasus",case_users:"Pengguna Kasus",routing:"Alur",open:"Buka",docs:"Dokumen",download:"Unduh",downloading:"Mengunduh...",print:"Cetak",printing:"Mencetak...",print_failed:"Cetak gagal",reload:"Muat Ulang",reload_page:"Muat Ulang Halaman",collapse_all:"Tutup Semua",expand_all:"Bentangkan Semua",download_excel:"Unduh Excel",coretabs:"CoreTabs",filter_by_status:"Filter berdasarkan Status:",filter_by_role:"Filter berdasarkan Peran:",filter_by_reported:"Filter berdasarkan Dilaporkan:",show_all:"Tampilkan Semua",yes:"Ya",no:"Tidak",case_number:"Nomor Kasus",taxpayer_name_tin:"Nama & NPWP Wajib Pajak",taxpayer_name:"Nama Wajib Pajak",tin:"NPWP",case_type:"Jenis Kasus",status:"Status",created_date:"Tanggal Dibuat",actions:"Aksi",letter_number:"Nomor Surat",file_name:"Nama File",date:"Tanggal",full_name:"Nama Lengkap",nip:"NIP",position:"Jabatan",office_name:"Nama Kantor",doc_number:"Nomor Dokumen",selling_price:"Harga Jual",vat_paid:"PPN Dibayar",stlg_paid:"PPnBM Dibayar",trans_code:"Kode Transaksi",reported:"Dilaporkan",case_role:"Peran Kasus",in_progress:"Sedang Berlangsung",completed:"Selesai",cancelled:"Dibatalkan",draft:"Draf",submitted:"Diajukan",approved:"Disetujui",rejected:"Ditolak",taxpayer:"Wajib Pajak",tax_officer:"Petugas Pajak",supervisor:"Supervisor",head_of_regional_office:"Kepala Kanwil","head_of_division_of_audit,_collection,_intelligence,_and_investigation":"Kepala Bidang Pemeriksaan, Penagihan, Intelijen, dan Penyidikan","head_of_section_of_preliminary_investigation_&_investigation_administration":"Kepala Seksi Administrasi Bukti Permulaan dan Penyidikan",digital_forensic_team_member:"Anggota Tim Forensik Digital",digital_forensic_team_leader:"Ketua Tim Forensik Digital",loading:"Memuat...",loading_my_cases:"Memuat kasus saya...",loading_documents:"Memuat dokumen...",loading_users:"Memuat pengguna...",loading_profile:"Memuat informasi profil...",loading_routing:"Memuat informasi alur...",loading_profile_name:"Memuat...",loading_profile_email:"Memuat...",no_cases_match:"Tidak ada kasus yang sesuai dengan filter yang dipilih.",no_documents_found:"Tidak ada dokumen ditemukan atau sesuai dengan filter yang dipilih.",no_users_found:"Tidak ada pengguna ditemukan atau sesuai dengan filter yang dipilih.",no_refund_data:"Tidak ada data tinjauan restitusi yang sesuai dengan filter.",profile_not_available:"Profil tidak tersedia",please_log_in:"Silakan masuk",error_loading_profile:"Kesalahan memuat profil",please_reload:"Silakan muat ulang",download_failed:"Unduhan gagal",case_must_be_selected:"Kasus harus dipilih.",select_case_for_documents:"Silakan pilih kasus untuk melihat dokumennya.",select_case_for_users:"Silakan pilih kasus untuk melihat penggunanya.",select_case_for_profile:"Silakan pilih kasus untuk melihat informasi profilnya.",select_case_for_routing:"Silakan pilih kasus untuk melihat informasi alurnya.",select_refund_case:'Pilih kasus restitusi dan klik "Tinjauan Restitusi" di header atau baris.',step_1_3_fetching_subprocess:"Langkah 1/3: Mengambil ID Sub Proses...",step_2_3_fetching_reference:"Langkah 2/3: Mengambil nomor referensi...",step_3_3_fetching_refund:"Langkah 3/3: Mengambil detail restitusi...",registration_date:"Tanggal Registrasi",email_address:"Alamat Email",telephone_number:"Nomor Telepon",tax_region:"Wilayah Pajak",tax_office:"Kantor Pajak",tax_office_address:"Alamat Kantor Pajak",tax_office_phone:"Nomor Telepon Kantor Pajak",description:"Deskripsi",business_classification:"Klasifikasi Usaha",tax_period:"Periode Pajak",tax_year:"Tahun Pajak",last_modified:"Terakhir Diubah",created_by:"Dibuat Oleh",na:"T/A",error_occurred:"Terjadi kesalahan:",language:"Bahasa"},l={en:i,id:d};let c="en";function p(e,n=e){return l[c]?.[e]||n}c=function(){const e=localStorage.getItem(a);return e&&l[e]?e:navigator.language.toLowerCase().startsWith("id")?"id":"en"}();const u=class{constructor(e,n){this.currentVersion=e||"1.0.0",this.cdnBaseUrl=n||"https://cdn.jsdelivr.net/gh/diasbaskara/ct@main/cdn",this.checkInterval=864e5,this.lastCheckKey="coretabs_last_update_check"}async checkForUpdates(e=!1){try{if(!e&&!this.shouldCheck())return null;const n=await this.fetchVersionsData();if(!n)return null;const r=n.latest,a=this.compareVersions(r,this.currentVersion)>0;if("undefined"!=typeof GM_setValue?await GM_setValue(this.lastCheckKey,Date.now()):localStorage.setItem(this.lastCheckKey,Date.now().toString()),a){const e={currentVersion:this.currentVersion,latestVersion:r,releaseNotes:n.versions[r]?.notes||"",downloadUrl:`${this.cdnBaseUrl}/latest/coretabs.user.js`};return this.showUpdateNotification(e),e}return null}catch(e){return null}}async fetchVersionsData(){try{return new Promise(e=>{if("undefined"==typeof GM_xmlhttpRequest)return void e(null);const n=setTimeout(()=>{e(null)},1e4);GM_xmlhttpRequest({method:"GET",url:`${this.cdnBaseUrl}/versions.json`,timeout:1e4,onload:r=>{clearTimeout(n);try{const n=JSON.parse(r.responseText);e(n)}catch(n){e(null)}},onerror:()=>{clearTimeout(n),e(null)},ontimeout:()=>{clearTimeout(n),e(null)}})})}catch(e){return null}}shouldCheck(){try{let e;if("undefined"!=typeof GM_getValue)e=GM_getValue(this.lastCheckKey,0);else{const n=localStorage.getItem(this.lastCheckKey);e=n?parseInt(n):0}if(!e)return!0;return Date.now()-e>this.checkInterval}catch(e){return!0}}compareVersions(e,n){const r=e.split(".").map(Number),a=n.split(".").map(Number);for(let e=0;e<Math.max(r.length,a.length);e++){const n=r[e]||0,t=a[e]||0;if(n>t)return 1;if(n<t)return-1}return 0}showUpdateNotification(e){const n=document.getElementById("coretabs-update-notification");n&&n.remove();const r=document.createElement("div");r.id="coretabs-update-notification",r.className="coretabs-update-notification";const a=document.createElement("div");a.className="update-title",a.textContent=p("update.available"),r.appendChild(a);const t=document.createElement("div");t.className="update-message",t.textContent=`${p("update.newVersion")} ${e}`,r.appendChild(t);const o=document.createElement("div");o.className="update-buttons";const s=document.createElement("button");s.textContent=p("update.install"),s.onclick=function(){window.open(this.updateUrl,"_blank"),r.remove()}.bind(this),o.appendChild(s);const i=document.createElement("button");i.textContent=p("common.close"),i.onclick=function(){r.remove()},o.appendChild(i),r.appendChild(o),document.body.appendChild(r),setTimeout(()=>{r.parentNode&&r.remove()},1e4)}createUpdateNotification(e){const n=document.createElement("div");n.className="coretabs-update-notification",n.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: white;\n        border: 1px solid #ddd;\n        border-radius: 8px;\n        padding: 20px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        z-index: 10000;\n        max-width: 400px;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ";const r=document.createElement("div");r.className="coretabs-update-content";const a=document.createElement("div");a.className="coretabs-update-header";const t=document.createElement("h3");t.textContent=p("update.available","Update Available"),t.style.margin="0 0 10px 0";const o=document.createElement("button");o.className="coretabs-update-close",o.textContent="×",o.style.cssText="float: right; background: none; border: none; font-size: 20px; cursor: pointer;",o.onclick=()=>n.remove(),a.appendChild(t),a.appendChild(o);const s=document.createElement("div");s.className="coretabs-update-body";const i=document.createElement("p");i.textContent=p("update.newVersion","A new version of CoreTabs is available!");const d=document.createElement("p"),l=document.createElement("strong");l.textContent=`${p("update.current","Current")}: ${e.currentVersion}`,d.appendChild(l);const c=document.createElement("p"),u=document.createElement("strong");if(u.textContent=`${p("update.latest","Latest")}: ${e.latestVersion}`,c.appendChild(u),s.appendChild(i),s.appendChild(d),s.appendChild(c),e.changelog.length>0){const n=document.createElement("div");n.className="coretabs-update-changelog";const r=document.createElement("h4");r.textContent=p("update.changelog","What's New:"),n.appendChild(r);const a=document.createElement("ul");e.changelog.forEach(e=>{const n=document.createElement("li");n.textContent=e,a.appendChild(n)}),n.appendChild(a),s.appendChild(n)}const g=document.createElement("div");g.className="coretabs-update-actions",g.style.cssText="margin-top: 15px; text-align: right;";const b=document.createElement("a");b.href=e.downloadUrl,b.className="coretabs-update-btn coretabs-update-btn-primary",b.textContent=p("update.install","Install Update"),b.style.cssText="display: inline-block; padding: 8px 16px; margin: 0 5px; background: #007cba; color: white; text-decoration: none; border-radius: 4px;";const m=document.createElement("button");m.className="coretabs-update-btn coretabs-update-btn-secondary",m.textContent=p("update.later","Later"),m.style.cssText="padding: 8px 16px; margin: 0 5px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;",m.onclick=()=>n.remove();const f=document.createElement("button");return f.className="coretabs-update-btn coretabs-update-btn-text",f.textContent=p("update.skip","Skip This Version"),f.style.cssText="padding: 8px 16px; margin: 0 5px; background: none; border: none; color: #666; cursor: pointer;",f.onclick=()=>{localStorage.setItem("coretabs_skip_version",e.latestVersion),n.remove()},g.appendChild(b),g.appendChild(m),g.appendChild(f),r.appendChild(a),r.appendChild(s),r.appendChild(g),n.appendChild(r),this.injectUpdateStyles(),n}injectUpdateStyles(){if(document.querySelector("#coretabs-update-styles"))return;const e=document.createElement("style");e.id="coretabs-update-styles",e.textContent="\n        .coretabs-update-notification {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            width: 350px;\n            background: white;\n            border: 1px solid #ddd;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            z-index: 10000;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            font-size: 14px;\n            animation: slideInRight 0.3s ease-out;\n        }\n        \n        @keyframes slideInRight {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        \n        .coretabs-update-content {\n            padding: 0;\n        }\n        \n        .coretabs-update-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 15px 20px 10px;\n            border-bottom: 1px solid #eee;\n        }\n        \n        .coretabs-update-header h3 {\n            margin: 0;\n            color: #333;\n            font-size: 16px;\n            font-weight: 600;\n        }\n        \n        .coretabs-update-close {\n            background: none;\n            border: none;\n            font-size: 20px;\n            cursor: pointer;\n            color: #999;\n            padding: 0;\n            width: 24px;\n            height: 24px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        .coretabs-update-close:hover {\n            color: #666;\n        }\n        \n        .coretabs-update-body {\n            padding: 15px 20px;\n        }\n        \n        .coretabs-update-body p {\n            margin: 0 0 8px 0;\n            color: #555;\n            line-height: 1.4;\n        }\n        \n        .coretabs-update-changelog {\n            margin-top: 12px;\n            padding-top: 12px;\n            border-top: 1px solid #f0f0f0;\n        }\n        \n        .coretabs-update-changelog h4 {\n            margin: 0 0 8px 0;\n            font-size: 14px;\n            color: #333;\n        }\n        \n        .coretabs-update-changelog ul {\n            margin: 0;\n            padding-left: 18px;\n        }\n        \n        .coretabs-update-changelog li {\n            margin-bottom: 4px;\n            color: #666;\n            font-size: 13px;\n        }\n        \n        .coretabs-update-actions {\n            padding: 15px 20px;\n            border-top: 1px solid #eee;\n            display: flex;\n            gap: 8px;\n            flex-wrap: wrap;\n        }\n        \n        .coretabs-update-btn {\n            padding: 8px 16px;\n            border-radius: 4px;\n            text-decoration: none;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            border: 1px solid transparent;\n            transition: all 0.2s;\n        }\n        \n        .coretabs-update-btn-primary {\n            background: #007cba;\n            color: white;\n        }\n        \n        .coretabs-update-btn-primary:hover {\n            background: #005a87;\n        }\n        \n        .coretabs-update-btn-secondary {\n            background: #f8f9fa;\n            color: #495057;\n            border-color: #dee2e6;\n        }\n        \n        .coretabs-update-btn-secondary:hover {\n            background: #e9ecef;\n        }\n        \n        .coretabs-update-btn-text {\n            background: none;\n            color: #6c757d;\n            padding: 8px 12px;\n        }\n        \n        .coretabs-update-btn-text:hover {\n            color: #495057;\n            background: #f8f9fa;\n        }\n    ",document.head.appendChild(e)}async manualCheck(){return await this.checkForUpdates(!0)}},g=document.createElement("style");g.textContent=":root {\r\n  --primary-color: #1976d2;\r\n  --secondary-color: #424242;\r\n  --success-color: #4caf50;\r\n  --warning-color: #ff9800;\r\n  --error-color: #f44336;\r\n  --info-color: #2196f3;\r\n  \r\n  --text-primary: #212121;\r\n  --text-secondary: #757575;\r\n  --text-disabled: #bdbdbd;\r\n  \r\n  --background-primary: #ffffff;\r\n  --background-secondary: #f5f5f5;\r\n  --background-paper: #ffffff;\r\n  \r\n  --border-color: #e0e0e0;\r\n  --divider-color: #e0e0e0;\r\n  \r\n  --shadow-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n  --shadow-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\r\n  --shadow-3: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);\r\n  \r\n  --border-radius: 4px;\r\n  --border-radius-large: 8px;\r\n  \r\n  --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n  --font-size-small: 12px;\r\n  --font-size-normal: 14px;\r\n  --font-size-large: 16px;\r\n  --font-size-xlarge: 18px;\r\n  \r\n  --spacing-xs: 4px;\r\n  --spacing-sm: 8px;\r\n  --spacing-md: 16px;\r\n  --spacing-lg: 24px;\r\n  --spacing-xl: 32px;\r\n  \r\n  --transition-fast: 0.15s ease;\r\n  --transition-normal: 0.3s ease;\r\n  --transition-slow: 0.5s ease;\r\n}";document.head.querySelector("style[data-userscript]")||(g.setAttribute("data-userscript","true"),document.head.appendChild(g));const b=document.createElement("style");b.textContent="/* CoreTabs Styles */\r\n.coretabs-sidebar {\r\n  position: fixed;\r\n  top: 0;\r\n  right: -400px;\r\n  width: 400px;\r\n  height: 100vh;\r\n  background: var(--background-paper);\r\n  box-shadow: var(--shadow-3);\r\n  z-index: 10000;\r\n  transition: right var(--transition-normal);\r\n  font-family: var(--font-family);\r\n  font-size: var(--font-size-normal);\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.coretabs-sidebar.open {\r\n  right: 0;\r\n}\r\n\r\n.coretabs-header {\r\n  background: var(--primary-color);\r\n  color: white;\r\n  padding: var(--spacing-md);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.coretabs-title {\r\n  font-size: var(--font-size-large);\r\n  font-weight: 600;\r\n  margin: 0;\r\n}\r\n\r\n.coretabs-close {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: var(--font-size-xlarge);\r\n  cursor: pointer;\r\n  padding: var(--spacing-xs);\r\n  border-radius: var(--border-radius);\r\n  transition: background-color var(--transition-fast);\r\n}\r\n\r\n.coretabs-close:hover {\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.coretabs-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: var(--spacing-md);\r\n}\r\n\r\n.coretabs-profile {\r\n  background: var(--background-secondary);\r\n  padding: var(--spacing-md);\r\n  border-radius: var(--border-radius);\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.coretabs-profile-name {\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  margin-bottom: var(--spacing-xs);\r\n}\r\n\r\n.coretabs-profile-role {\r\n  color: var(--text-secondary);\r\n  font-size: var(--font-size-small);\r\n}\r\n\r\n.coretabs-tabs {\r\n  display: flex;\r\n  border-bottom: 1px solid var(--border-color);\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.coretabs-tab {\r\n  background: none;\r\n  border: none;\r\n  padding: var(--spacing-sm) var(--spacing-md);\r\n  cursor: pointer;\r\n  border-bottom: 2px solid transparent;\r\n  transition: all var(--transition-fast);\r\n  color: var(--text-secondary);\r\n  font-size: var(--font-size-normal);\r\n}\r\n\r\n.coretabs-tab.active {\r\n  color: var(--primary-color);\r\n  border-bottom-color: var(--primary-color);\r\n}\r\n\r\n.coretabs-tab:hover {\r\n  background-color: var(--background-secondary);\r\n}\r\n\r\n.coretabs-tab-content {\r\n  display: none;\r\n}\r\n\r\n.coretabs-tab-content.active {\r\n  display: block;\r\n}\r\n\r\n.coretabs-loading {\r\n  text-align: center;\r\n  padding: var(--spacing-lg);\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.coretabs-error {\r\n  background: #ffebee;\r\n  color: var(--error-color);\r\n  padding: var(--spacing-md);\r\n  border-radius: var(--border-radius);\r\n  margin-bottom: var(--spacing-md);\r\n  border-left: 4px solid var(--error-color);\r\n}\r\n\r\n.coretabs-toggle {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  background: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  box-shadow: var(--shadow-2);\r\n  z-index: 9999;\r\n  font-size: var(--font-size-large);\r\n  transition: all var(--transition-fast);\r\n}\r\n\r\n.coretabs-toggle:hover {\r\n  transform: scale(1.1);\r\n  box-shadow: var(--shadow-3);\r\n}\r\n\r\n.coretabs-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.coretabs-table th,\r\n.coretabs-table td {\r\n  padding: var(--spacing-sm);\r\n  text-align: left;\r\n  border-bottom: 1px solid var(--border-color);\r\n  font-size: var(--font-size-small);\r\n}\r\n\r\n.coretabs-table th {\r\n  background: var(--background-secondary);\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.coretabs-table tr:hover {\r\n  background: var(--background-secondary);\r\n}\r\n\r\n.coretabs-badge {\r\n  display: inline-block;\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-size: 11px;\r\n  font-weight: 500;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.coretabs-badge.status-active {\r\n  background: #e8f5e8;\r\n  color: var(--success-color);\r\n}\r\n\r\n.coretabs-badge.status-pending {\r\n  background: #fff3e0;\r\n  color: var(--warning-color);\r\n}\r\n\r\n.coretabs-badge.status-completed {\r\n  background: #e3f2fd;\r\n  color: var(--info-color);\r\n}";document.head.querySelector("style[data-userscript]")||(b.setAttribute("data-userscript","true"),document.head.appendChild(b));const m=document.createElement("style");m.textContent="/* Responsive styles */\r\n@media (max-width: 768px) {\r\n  .coretabs-sidebar {\r\n    width: 100vw;\r\n    right: -100vw;\r\n  }\r\n  \r\n  .coretabs-sidebar.open {\r\n    right: 0;\r\n  }\r\n  \r\n  .coretabs-toggle {\r\n    top: 10px;\r\n    right: 10px;\r\n    width: 40px;\r\n    height: 40px;\r\n    font-size: var(--font-size-normal);\r\n  }\r\n  \r\n  .coretabs-content {\r\n    padding: var(--spacing-sm);\r\n  }\r\n  \r\n  .coretabs-table {\r\n    font-size: 11px;\r\n  }\r\n  \r\n  .coretabs-table th,\r\n  .coretabs-table td {\r\n    padding: var(--spacing-xs);\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .coretabs-header {\r\n    padding: var(--spacing-sm);\r\n  }\r\n  \r\n  .coretabs-title {\r\n    font-size: var(--font-size-normal);\r\n  }\r\n  \r\n  .coretabs-tabs {\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .coretabs-tab {\r\n    flex: 1;\r\n    min-width: 80px;\r\n    padding: var(--spacing-xs) var(--spacing-sm);\r\n    font-size: var(--font-size-small);\r\n  }\r\n}";document.head.querySelector("style[data-userscript]")||(m.setAttribute("data-userscript","true"),document.head.appendChild(m));const f="undefined"!=typeof __VERSION__?__VERSION__:"1.0.0";class h{constructor(){this.initialized=!1,this.version=f,this.updateChecker=new u,this.injectStyles()}injectStyles(){if(document.querySelector("style[data-coretabs]"))return;const e=document.createElement("style");e.setAttribute("data-coretabs","true"),e.textContent=":root {\r\n  --primary-color: #1976d2;\r\n  --secondary-color: #424242;\r\n  --success-color: #4caf50;\r\n  --warning-color: #ff9800;\r\n  --error-color: #f44336;\r\n  --info-color: #2196f3;\r\n  \r\n  --text-primary: #212121;\r\n  --text-secondary: #757575;\r\n  --text-disabled: #bdbdbd;\r\n  \r\n  --background-primary: #ffffff;\r\n  --background-secondary: #f5f5f5;\r\n  --background-paper: #ffffff;\r\n  \r\n  --border-color: #e0e0e0;\r\n  --divider-color: #e0e0e0;\r\n  \r\n  --shadow-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n  --shadow-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\r\n  --shadow-3: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);\r\n  \r\n  --border-radius: 4px;\r\n  --border-radius-large: 8px;\r\n  \r\n  --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n  --font-size-small: 12px;\r\n  --font-size-normal: 14px;\r\n  --font-size-large: 16px;\r\n  --font-size-xlarge: 18px;\r\n  \r\n  --spacing-xs: 4px;\r\n  --spacing-sm: 8px;\r\n  --spacing-md: 16px;\r\n  --spacing-lg: 24px;\r\n  --spacing-xl: 32px;\r\n  \r\n  --transition-fast: 0.15s ease;\r\n  --transition-normal: 0.3s ease;\r\n  --transition-slow: 0.5s ease;\r\n}/* CoreTabs Styles */\r\n.coretabs-sidebar {\r\n  position: fixed;\r\n  top: 0;\r\n  right: -400px;\r\n  width: 400px;\r\n  height: 100vh;\r\n  background: var(--background-paper);\r\n  box-shadow: var(--shadow-3);\r\n  z-index: 10000;\r\n  transition: right var(--transition-normal);\r\n  font-family: var(--font-family);\r\n  font-size: var(--font-size-normal);\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.coretabs-sidebar.open {\r\n  right: 0;\r\n}\r\n\r\n.coretabs-header {\r\n  background: var(--primary-color);\r\n  color: white;\r\n  padding: var(--spacing-md);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.coretabs-title {\r\n  font-size: var(--font-size-large);\r\n  font-weight: 600;\r\n  margin: 0;\r\n}\r\n\r\n.coretabs-close {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: var(--font-size-xlarge);\r\n  cursor: pointer;\r\n  padding: var(--spacing-xs);\r\n  border-radius: var(--border-radius);\r\n  transition: background-color var(--transition-fast);\r\n}\r\n\r\n.coretabs-close:hover {\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.coretabs-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: var(--spacing-md);\r\n}\r\n\r\n.coretabs-profile {\r\n  background: var(--background-secondary);\r\n  padding: var(--spacing-md);\r\n  border-radius: var(--border-radius);\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.coretabs-profile-name {\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  margin-bottom: var(--spacing-xs);\r\n}\r\n\r\n.coretabs-profile-role {\r\n  color: var(--text-secondary);\r\n  font-size: var(--font-size-small);\r\n}\r\n\r\n.coretabs-tabs {\r\n  display: flex;\r\n  border-bottom: 1px solid var(--border-color);\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.coretabs-tab {\r\n  background: none;\r\n  border: none;\r\n  padding: var(--spacing-sm) var(--spacing-md);\r\n  cursor: pointer;\r\n  border-bottom: 2px solid transparent;\r\n  transition: all var(--transition-fast);\r\n  color: var(--text-secondary);\r\n  font-size: var(--font-size-normal);\r\n}\r\n\r\n.coretabs-tab.active {\r\n  color: var(--primary-color);\r\n  border-bottom-color: var(--primary-color);\r\n}\r\n\r\n.coretabs-tab:hover {\r\n  background-color: var(--background-secondary);\r\n}\r\n\r\n.coretabs-tab-content {\r\n  display: none;\r\n}\r\n\r\n.coretabs-tab-content.active {\r\n  display: block;\r\n}\r\n\r\n.coretabs-loading {\r\n  text-align: center;\r\n  padding: var(--spacing-lg);\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.coretabs-error {\r\n  background: #ffebee;\r\n  color: var(--error-color);\r\n  padding: var(--spacing-md);\r\n  border-radius: var(--border-radius);\r\n  margin-bottom: var(--spacing-md);\r\n  border-left: 4px solid var(--error-color);\r\n}\r\n\r\n.coretabs-toggle {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  background: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  box-shadow: var(--shadow-2);\r\n  z-index: 9999;\r\n  font-size: var(--font-size-large);\r\n  transition: all var(--transition-fast);\r\n}\r\n\r\n.coretabs-toggle:hover {\r\n  transform: scale(1.1);\r\n  box-shadow: var(--shadow-3);\r\n}\r\n\r\n.coretabs-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.coretabs-table th,\r\n.coretabs-table td {\r\n  padding: var(--spacing-sm);\r\n  text-align: left;\r\n  border-bottom: 1px solid var(--border-color);\r\n  font-size: var(--font-size-small);\r\n}\r\n\r\n.coretabs-table th {\r\n  background: var(--background-secondary);\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.coretabs-table tr:hover {\r\n  background: var(--background-secondary);\r\n}\r\n\r\n.coretabs-badge {\r\n  display: inline-block;\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-size: 11px;\r\n  font-weight: 500;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.coretabs-badge.status-active {\r\n  background: #e8f5e8;\r\n  color: var(--success-color);\r\n}\r\n\r\n.coretabs-badge.status-pending {\r\n  background: #fff3e0;\r\n  color: var(--warning-color);\r\n}\r\n\r\n.coretabs-badge.status-completed {\r\n  background: #e3f2fd;\r\n  color: var(--info-color);\r\n}/* Responsive styles */\r\n@media (max-width: 768px) {\r\n  .coretabs-sidebar {\r\n    width: 100vw;\r\n    right: -100vw;\r\n  }\r\n  \r\n  .coretabs-sidebar.open {\r\n    right: 0;\r\n  }\r\n  \r\n  .coretabs-toggle {\r\n    top: 10px;\r\n    right: 10px;\r\n    width: 40px;\r\n    height: 40px;\r\n    font-size: var(--font-size-normal);\r\n  }\r\n  \r\n  .coretabs-content {\r\n    padding: var(--spacing-sm);\r\n  }\r\n  \r\n  .coretabs-table {\r\n    font-size: 11px;\r\n  }\r\n  \r\n  .coretabs-table th,\r\n  .coretabs-table td {\r\n    padding: var(--spacing-xs);\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .coretabs-header {\r\n    padding: var(--spacing-sm);\r\n  }\r\n  \r\n  .coretabs-title {\r\n    font-size: var(--font-size-normal);\r\n  }\r\n  \r\n  .coretabs-tabs {\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .coretabs-tab {\r\n    flex: 1;\r\n    min-width: 80px;\r\n    padding: var(--spacing-xs) var(--spacing-sm);\r\n    font-size: var(--font-size-small);\r\n  }\r\n}",document.head.appendChild(e)}async init(){if(!this.initialized)try{this.initializeState(),this.createUI(),this.initializeEventHandlers(),await this.fetchInitialData(),this.initialized=!0}catch(e){}}createUI(){}initializeEventHandlers(){}initializeState(){e.set("currentScreen","cases"),e.set("currentTab","profile"),e.set("sidebarOpen",!1),e.set("selectedCaseId",null),e.set("currentLanguage","en"),e.set("allMyCases",[]),e.set("allCaseDocuments",[]),e.set("allCaseUsers",[]),e.set("refundReviewData",[]),e.set("filteredRefundData",[]),e.set("routingData",null),e.set("workflowDiagram",null),e.set("loadedCasesForCaseId",null),e.set("loadedDocumentsForCaseId",null),e.set("loadedUsersForCaseId",null),e.set("loadedRefundForCaseId",null),e.set("loadedRoutingForCaseId",null)}async fetchInitialData(){try{const n=await async function(){try{const n=await fetch(t.CASES,{method:"POST",headers:s(),body:JSON.stringify({filter:r,pageSize:50,pageNumber:1})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return e.set("allMyCases",a.data||a),a}catch(e){throw new Error(`Failed to fetch cases: ${e.message}`)}}();n&&n.data&&e.set("allMyCases",n.data)}catch(e){}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{(new h).init()}):(new h).init()})();