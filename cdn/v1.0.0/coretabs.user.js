// ==UserScript==
// @name         CoreTabs
// @namespace    https://github.com/diasbaskara/ct
// @version      1.0.0
// @description  Enhanced CoreTabs userscript with modular architecture
// @author       diasbaskara
// @match        https://coretax.intranet.pajak.go.id/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pajak.go.id
// @homepage     https://github.com/diasbaskara/ct
// @supportURL   https://github.com/diasbaskara/ct/issues
// @updateURL    https://cdn.jsdelivr.net/gh/diasbaskara/ct@main/cdn/latest/coretabs.meta.js
// @downloadURL  https://cdn.jsdelivr.net/gh/diasbaskara/ct@main/cdn/latest/coretabs.user.js
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_deleteValue

// ==/UserScript==
(()=>{"use strict";const t=new class{constructor(){this.state={allMyCases:[],allCaseDocuments:[],allCaseUsers:[],refundReviewData:[],filteredRefundData:[],selectedCaseId:null,loadedDocsForCaseId:null,loadedUsersForCaseId:null,loadedProfileForCaseId:null,loadedRoutingForCaseId:null,routingData:null,workflowDiagram:null,currentScreen:"my-cases",currentTab:"my-cases",sidebarOpen:!1},this.listeners={}}get(t){return this.state[t]}set(t,n){const e=this.state[t];this.state[t]=n,this.listeners[t]&&this.listeners[t].forEach(t=>{try{t(n,e)}catch(t){}})}subscribe(t,n){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n),()=>{const e=this.listeners[t].indexOf(n);e>-1&&this.listeners[t].splice(e,1)}}getAll(){return{...this.state}}clear(){this.state={allMyCases:[],allCaseDocuments:[],allCaseUsers:[],refundReviewData:[],filteredRefundData:[],selectedCaseId:null,loadedDocsForCaseId:null,loadedUsersForCaseId:null,loadedProfileForCaseId:null,loadedRoutingForCaseId:null,routingData:null,workflowDiagram:null,currentScreen:"my-cases",currentTab:"my-cases",sidebarOpen:!1},this.listeners={}}notify(t,n){this.listeners[t]&&this.listeners[t].forEach(t=>{try{t(n)}catch(t){}})}},n="cats-angular-clientuser:https://coretax.intranet.pajak.go.id/identityprovider:cats-angular-client",e="coretabs-language",a={CASES:"https://coretax.intranet.pajak.go.id/casemanagement/api/caselist/mycases",DOCUMENTS:"https://coretax.intranet.pajak.go.id/casemanagement/api/casedocument/list",USERS:"https://coretax.intranet.pajak.go.id/casemanagement/api/caseuser/list",PROFILE:"https://coretax.intranet.pajak.go.id/casemanagement/api/generalinformation/view",ROUTING:"https://coretax.intranet.pajak.go.id/casemanagement/api/caserouting/view",DOWNLOAD:"https://coretax.intranet.pajak.go.id/documentmanagement/api/download"};function r(){const t=localStorage.getItem(n);if(t)try{const n=JSON.parse(t);return n.access_token||n.accessToken}catch(t){return null}return null}function c(t=null){const n=r(),e={"Content-Type":"application/json",Accept:"application/json"};return n&&(e.Authorization=`Bearer ${n}`),t&&(e["X-Case-Url"]=t),e}async function o(){try{const n=await fetch(a.CASES,{method:"POST",headers:c(),body:JSON.stringify({})});if(!n.ok){const t=await n.json();throw new Error(`API Error: ${t.Message||n.statusText}`)}const e=await n.json(),r=e?.Payload?.Data||[];return t.set("allMyCases",r),e}catch(t){throw new Error(`Failed to fetch cases: ${t.message}`)}}const i={my_cases:"My Cases",case_details:"Case Details",back:"← Back",no_case_selected:"No Case Selected",select_case_message:'Please select a case from the "My Cases" screen',select_case_tab_message:'Please select a case from the "My Cases" tab',profile:"Profile",documents:"Documents",users:"Users",refund_review:"Refund Review",case_documents:"Case Documents",case_users:"Case Users",routing:"Routing",open:"Open",docs:"Docs",download:"Download",downloading:"Downloading...",print:"Print",printing:"Printing...",print_failed:"Print failed",reload:"Reload",reload_page:"Reload Page",collapse_all:"Collapse All",expand_all:"Expand All",download_excel:"Download Excel",coretabs:"CoreTabs",filter_by_status:"Filter by Status:",filter_by_role:"Filter by Role:",filter_by_reported:"Filter by Reported:",show_all:"Show All",yes:"Yes",no:"No",case_number:"Case Number",taxpayer_name_tin:"Taxpayer Name & TIN",case_type:"Case Type",status:"Status",created_date:"Created Date",actions:"Actions",letter_number:"Letter Number",file_name:"File Name",date:"Date",full_name:"Full Name",nip:"NIP",position:"Position",office_name:"Office Name",doc_number:"Doc Number",selling_price:"Selling Price",vat_paid:"VAT Paid",stlg_paid:"STLG Paid",trans_code:"Trans Code",reported:"Reported",case_role:"Case Role",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected",taxpayer:"Taxpayer",tax_officer:"Tax Officer",supervisor:"Supervisor",head_of_regional_office:"Head of Regional Office","head_of_division_of_audit,_collection,_intelligence,_and_investigation":"Head of Division of Audit, Collection, Intelligence, and Investigation","head_of_section_of_preliminary_investigation_&_investigation_administration":"Head of Section of Preliminary Investigation & Investigation Administration",digital_forensic_team_member:"Digital Forensic Team Member",digital_forensic_team_leader:"Digital Forensic Team Leader",loading:"Loading...",loading_my_cases:"Loading my cases...",loading_documents:"Loading documents...",loading_users:"Loading users...",loading_profile:"Loading profile information...",loading_routing:"Loading routing information...",loading_profile_name:"Loading...",loading_profile_email:"Loading...",no_cases_match:"No cases match the selected filter.","cases.no_data":"No cases found.",no_documents_found:"No documents found or match the selected filter.",no_users_found:"No users found or match the selected filter.",no_refund_data:"No refund review data matches the filter.",profile_not_available:"Profile not available",please_log_in:"Please log in",error_loading_profile:"Error loading profile",please_reload:"Please reload",download_failed:"Download failed",case_must_be_selected:"A case must be selected.",select_case_for_documents:"Please select a case to view its documents.",select_case_for_users:"Please select a case to view its users.",select_case_for_profile:"Please select a case to view its profile information.",select_case_for_routing:"Please select a case to view its routing information.",select_refund_case:'Select a refund case and click "Refund Review" in the header or row.',step_1_3_fetching_subprocess:"Step 1/3: Fetching Sub Process ID...",step_2_3_fetching_reference:"Step 2/3: Fetching reference number...",step_3_3_fetching_refund:"Step 3/3: Fetching refund details...",registration_date:"Registration Date",email_address:"Email Address",telephone_number:"Telephone Number",tax_region:"Tax Region",tax_office:"Tax Office",tax_office_address:"Tax Office Address",tax_office_phone:"Tax Office Phone Number",description:"Description",business_classification:"Business Classification",tax_period:"Tax Period",tax_year:"Tax Year",last_modified:"Last Modified",created_by:"Created By",na:"N/A",error_occurred:"An error occurred:",language:"Language"},s={my_cases:"Kasus Saya",case_details:"Detail Kasus",back:"← Kembali",no_case_selected:"Tidak Ada Kasus Dipilih",select_case_message:'Silakan pilih kasus dari layar "Kasus Saya"',select_case_tab_message:'Silakan pilih kasus dari tab "Kasus Saya"',profile:"Profil",documents:"Dokumen",users:"Pengguna",refund_review:"Tinjauan Restitusi",case_documents:"Dokumen Kasus",case_users:"Pengguna Kasus",routing:"Alur",open:"Buka",docs:"Dokumen",download:"Unduh",downloading:"Mengunduh...",print:"Cetak",printing:"Mencetak...",print_failed:"Cetak gagal",reload:"Muat Ulang",reload_page:"Muat Ulang Halaman",collapse_all:"Tutup Semua",expand_all:"Bentangkan Semua",download_excel:"Unduh Excel",coretabs:"CoreTabs",filter_by_status:"Filter berdasarkan Status:",filter_by_role:"Filter berdasarkan Peran:",filter_by_reported:"Filter berdasarkan Dilaporkan:",show_all:"Tampilkan Semua",yes:"Ya",no:"Tidak",case_number:"Nomor Kasus",taxpayer_name_tin:"Nama & NPWP Wajib Pajak",taxpayer_name:"Nama Wajib Pajak",tin:"NPWP",case_type:"Jenis Kasus",status:"Status",created_date:"Tanggal Dibuat",actions:"Aksi",letter_number:"Nomor Surat",file_name:"Nama File",date:"Tanggal",full_name:"Nama Lengkap",nip:"NIP",position:"Jabatan",office_name:"Nama Kantor",doc_number:"Nomor Dokumen",selling_price:"Harga Jual",vat_paid:"PPN Dibayar",stlg_paid:"PPnBM Dibayar",trans_code:"Kode Transaksi",reported:"Dilaporkan",case_role:"Peran Kasus",in_progress:"Sedang Berlangsung",completed:"Selesai",cancelled:"Dibatalkan",draft:"Draf",submitted:"Diajukan",approved:"Disetujui",rejected:"Ditolak",taxpayer:"Wajib Pajak",tax_officer:"Petugas Pajak",supervisor:"Supervisor",head_of_regional_office:"Kepala Kanwil","head_of_division_of_audit,_collection,_intelligence,_and_investigation":"Kepala Bidang Pemeriksaan, Penagihan, Intelijen, dan Penyidikan","head_of_section_of_preliminary_investigation_&_investigation_administration":"Kepala Seksi Administrasi Bukti Permulaan dan Penyidikan",digital_forensic_team_member:"Anggota Tim Forensik Digital",digital_forensic_team_leader:"Ketua Tim Forensik Digital",loading:"Memuat...",loading_my_cases:"Memuat kasus saya...",loading_documents:"Memuat dokumen...",loading_users:"Memuat pengguna...",loading_profile:"Memuat informasi profil...",loading_routing:"Memuat informasi alur...",loading_profile_name:"Memuat...",loading_profile_email:"Memuat...",no_cases_match:"Tidak ada kasus yang sesuai dengan filter yang dipilih.","cases.no_data":"Tidak ada kasus ditemukan.",no_documents_found:"Tidak ada dokumen ditemukan atau sesuai dengan filter yang dipilih.",no_users_found:"Tidak ada pengguna ditemukan atau sesuai dengan filter yang dipilih.",no_refund_data:"Tidak ada data tinjauan restitusi yang sesuai dengan filter.",profile_not_available:"Profil tidak tersedia",please_log_in:"Silakan masuk",error_loading_profile:"Kesalahan memuat profil",please_reload:"Silakan muat ulang",download_failed:"Unduhan gagal",case_must_be_selected:"Kasus harus dipilih.",select_case_for_documents:"Silakan pilih kasus untuk melihat dokumennya.",select_case_for_users:"Silakan pilih kasus untuk melihat penggunanya.",select_case_for_profile:"Silakan pilih kasus untuk melihat informasi profilnya.",select_case_for_routing:"Silakan pilih kasus untuk melihat informasi alurnya.",select_refund_case:'Pilih kasus restitusi dan klik "Tinjauan Restitusi" di header atau baris.',step_1_3_fetching_subprocess:"Langkah 1/3: Mengambil ID Sub Proses...",step_2_3_fetching_reference:"Langkah 2/3: Mengambil nomor referensi...",step_3_3_fetching_refund:"Langkah 3/3: Mengambil detail restitusi...",registration_date:"Tanggal Registrasi",email_address:"Alamat Email",telephone_number:"Nomor Telepon",tax_region:"Wilayah Pajak",tax_office:"Kantor Pajak",tax_office_address:"Alamat Kantor Pajak",tax_office_phone:"Nomor Telepon Kantor Pajak",description:"Deskripsi",business_classification:"Klasifikasi Usaha",tax_period:"Periode Pajak",tax_year:"Tahun Pajak",last_modified:"Terakhir Diubah",created_by:"Dibuat Oleh",na:"T/A",error_occurred:"Terjadi kesalahan:",language:"Bahasa"},d={en:i,id:s};let l="en";function p(t,n=t){return d[l]?.[t]||n}l=function(){const t=localStorage.getItem(e);return t&&d[t]?t:navigator.language.toLowerCase().startsWith("id")?"id":"en"}();const m=class{constructor(t,n){this.currentVersion=t||"1.0.0",this.cdnBaseUrl=n||"https://cdn.jsdelivr.net/gh/diasbaskara/ct@main/cdn",this.checkInterval=864e5,this.lastCheckKey="coretabs_last_update_check"}async checkForUpdates(t=!1){try{if(!t&&!this.shouldCheck())return null;const n=await this.fetchVersionsData();if(!n)return null;const e=n.latest,a=this.compareVersions(e,this.currentVersion)>0;if("undefined"!=typeof GM_setValue?await GM_setValue(this.lastCheckKey,Date.now()):localStorage.setItem(this.lastCheckKey,Date.now().toString()),a){const t={currentVersion:this.currentVersion,latestVersion:e,releaseNotes:n.versions[e]?.notes||"",downloadUrl:`${this.cdnBaseUrl}/latest/coretabs.user.js`};return this.showUpdateNotification(t),t}return null}catch(t){return null}}async fetchVersionsData(){try{return new Promise(t=>{if("undefined"==typeof GM_xmlhttpRequest)return void t(null);const n=setTimeout(()=>{t(null)},1e4);GM_xmlhttpRequest({method:"GET",url:`${this.cdnBaseUrl}/versions.json`,timeout:1e4,onload:e=>{clearTimeout(n);try{const n=JSON.parse(e.responseText);t(n)}catch(n){t(null)}},onerror:()=>{clearTimeout(n),t(null)},ontimeout:()=>{clearTimeout(n),t(null)}})})}catch(t){return null}}shouldCheck(){try{let t;if("undefined"!=typeof GM_getValue)t=GM_getValue(this.lastCheckKey,0);else{const n=localStorage.getItem(this.lastCheckKey);t=n?parseInt(n):0}if(!t)return!0;return Date.now()-t>this.checkInterval}catch(t){return!0}}compareVersions(t,n){const e=t.split(".").map(Number),a=n.split(".").map(Number);for(let t=0;t<Math.max(e.length,a.length);t++){const n=e[t]||0,r=a[t]||0;if(n>r)return 1;if(n<r)return-1}return 0}showUpdateNotification(t){const n=document.getElementById("coretabs-update-notification");n&&n.remove();const e=document.createElement("div");e.id="coretabs-update-notification",e.className="coretabs-update-notification";const a=document.createElement("div");a.className="update-title",a.textContent=p("update.available"),e.appendChild(a);const r=document.createElement("div");r.className="update-message",r.textContent=`${p("update.newVersion")} ${t}`,e.appendChild(r);const c=document.createElement("div");c.className="update-buttons";const o=document.createElement("button");o.textContent=p("update.install"),o.onclick=function(){window.open(this.updateUrl,"_blank"),e.remove()}.bind(this),c.appendChild(o);const i=document.createElement("button");i.textContent=p("common.close"),i.onclick=function(){e.remove()},c.appendChild(i),e.appendChild(c),document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.remove()},1e4)}createUpdateNotification(t){const n=document.createElement("div");n.className="coretabs-update-notification",n.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: white;\n        border: 1px solid #ddd;\n        border-radius: 8px;\n        padding: 20px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        z-index: 10000;\n        max-width: 400px;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ";const e=document.createElement("div");e.className="coretabs-update-content";const a=document.createElement("div");a.className="coretabs-update-header";const r=document.createElement("h3");r.textContent=p("update.available","Update Available"),r.style.margin="0 0 10px 0";const c=document.createElement("button");c.className="coretabs-update-close",c.textContent="×",c.style.cssText="float: right; background: none; border: none; font-size: 20px; cursor: pointer;",c.onclick=()=>n.remove(),a.appendChild(r),a.appendChild(c);const o=document.createElement("div");o.className="coretabs-update-body";const i=document.createElement("p");i.textContent=p("update.newVersion","A new version of CoreTabs is available!");const s=document.createElement("p"),d=document.createElement("strong");d.textContent=`${p("update.current","Current")}: ${t.currentVersion}`,s.appendChild(d);const l=document.createElement("p"),m=document.createElement("strong");if(m.textContent=`${p("update.latest","Latest")}: ${t.latestVersion}`,l.appendChild(m),o.appendChild(i),o.appendChild(s),o.appendChild(l),t.changelog.length>0){const n=document.createElement("div");n.className="coretabs-update-changelog";const e=document.createElement("h4");e.textContent=p("update.changelog","What's New:"),n.appendChild(e);const a=document.createElement("ul");t.changelog.forEach(t=>{const n=document.createElement("li");n.textContent=t,a.appendChild(n)}),n.appendChild(a),o.appendChild(n)}const u=document.createElement("div");u.className="coretabs-update-actions",u.style.cssText="margin-top: 15px; text-align: right;";const g=document.createElement("a");g.href=t.downloadUrl,g.className="coretabs-update-btn coretabs-update-btn-primary",g.textContent=p("update.install","Install Update"),g.style.cssText="display: inline-block; padding: 8px 16px; margin: 0 5px; background: #007cba; color: white; text-decoration: none; border-radius: 4px;";const h=document.createElement("button");h.className="coretabs-update-btn coretabs-update-btn-secondary",h.textContent=p("update.later","Later"),h.style.cssText="padding: 8px 16px; margin: 0 5px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;",h.onclick=()=>n.remove();const f=document.createElement("button");return f.className="coretabs-update-btn coretabs-update-btn-text",f.textContent=p("update.skip","Skip This Version"),f.style.cssText="padding: 8px 16px; margin: 0 5px; background: none; border: none; color: #666; cursor: pointer;",f.onclick=()=>{localStorage.setItem("coretabs_skip_version",t.latestVersion),n.remove()},u.appendChild(g),u.appendChild(h),u.appendChild(f),e.appendChild(a),e.appendChild(o),e.appendChild(u),n.appendChild(e),this.injectUpdateStyles(),n}injectUpdateStyles(){if(document.querySelector("#coretabs-update-styles"))return;const t=document.createElement("style");t.id="coretabs-update-styles",t.textContent="\n        .coretabs-update-notification {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            width: 350px;\n            background: white;\n            border: 1px solid #ddd;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            z-index: 10000;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            font-size: 14px;\n            animation: slideInRight 0.3s ease-out;\n        }\n        \n        @keyframes slideInRight {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        \n        .coretabs-update-content {\n            padding: 0;\n        }\n        \n        .coretabs-update-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 15px 20px 10px;\n            border-bottom: 1px solid #eee;\n        }\n        \n        .coretabs-update-header h3 {\n            margin: 0;\n            color: #333;\n            font-size: 16px;\n            font-weight: 600;\n        }\n        \n        .coretabs-update-close {\n            background: none;\n            border: none;\n            font-size: 20px;\n            cursor: pointer;\n            color: #999;\n            padding: 0;\n            width: 24px;\n            height: 24px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        .coretabs-update-close:hover {\n            color: #666;\n        }\n        \n        .coretabs-update-body {\n            padding: 15px 20px;\n        }\n        \n        .coretabs-update-body p {\n            margin: 0 0 8px 0;\n            color: #555;\n            line-height: 1.4;\n        }\n        \n        .coretabs-update-changelog {\n            margin-top: 12px;\n            padding-top: 12px;\n            border-top: 1px solid #f0f0f0;\n        }\n        \n        .coretabs-update-changelog h4 {\n            margin: 0 0 8px 0;\n            font-size: 14px;\n            color: #333;\n        }\n        \n        .coretabs-update-changelog ul {\n            margin: 0;\n            padding-left: 18px;\n        }\n        \n        .coretabs-update-changelog li {\n            margin-bottom: 4px;\n            color: #666;\n            font-size: 13px;\n        }\n        \n        .coretabs-update-actions {\n            padding: 15px 20px;\n            border-top: 1px solid #eee;\n            display: flex;\n            gap: 8px;\n            flex-wrap: wrap;\n        }\n        \n        .coretabs-update-btn {\n            padding: 8px 16px;\n            border-radius: 4px;\n            text-decoration: none;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            border: 1px solid transparent;\n            transition: all 0.2s;\n        }\n        \n        .coretabs-update-btn-primary {\n            background: #007cba;\n            color: white;\n        }\n        \n        .coretabs-update-btn-primary:hover {\n            background: #005a87;\n        }\n        \n        .coretabs-update-btn-secondary {\n            background: #f8f9fa;\n            color: #495057;\n            border-color: #dee2e6;\n        }\n        \n        .coretabs-update-btn-secondary:hover {\n            background: #e9ecef;\n        }\n        \n        .coretabs-update-btn-text {\n            background: none;\n            color: #6c757d;\n            padding: 8px 12px;\n        }\n        \n        .coretabs-update-btn-text:hover {\n            color: #495057;\n            background: #f8f9fa;\n        }\n    ",document.head.appendChild(t)}async manualCheck(){return await this.checkForUpdates(!0)}};function u(n,e){if(!e){const t=document.createElement("div");return t.className="ct-no-selection",t.textContent=p("profile.no_case_selected"),void n.appendChild(t)}const r=document.createElement("div");r.className="ct-loading",r.textContent=p("common.loading"),n.appendChild(r),async function(n){try{const e=await fetch(a.PROFILE,{method:"POST",headers:c(n),body:JSON.stringify({AggregateIdentifier:n,LanguageId:"id-ID"})});if(!e.ok){const t=await e.json();throw new Error(`API Error: ${t.Message||e.statusText}`)}const r=await e.json();return t.set("loadedProfileForCaseId",n),r}catch(t){throw new Error(`Failed to fetch profile: ${t.message}`)}}(e).then(t=>{if(n.innerHTML="",!t||!t.data){const t=document.createElement("div");return t.className="ct-no-data",t.textContent=p("profile.no_data"),void n.appendChild(t)}const e=t.data,a=document.createElement("div");a.className="ct-profile-container";const r=g(p("profile.basic_info"),[{label:p("profile.case_number"),value:e.caseNumber},{label:p("profile.status"),value:e.status},{label:p("profile.type"),value:e.caseType},{label:p("profile.priority"),value:e.priority},{label:p("profile.created_date"),value:e.createdDate},{label:p("profile.last_update"),value:e.lastUpdate}]),c=g(p("profile.customer_info"),[{label:p("profile.customer_name"),value:e.customerName},{label:p("profile.customer_email"),value:e.customerEmail},{label:p("profile.customer_phone"),value:e.customerPhone},{label:p("profile.customer_id"),value:e.customerId}]),o=g(p("profile.transaction_info"),[{label:p("profile.transaction_id"),value:e.transactionId},{label:p("profile.amount"),value:e.amount},{label:p("profile.currency"),value:e.currency},{label:p("profile.payment_method"),value:e.paymentMethod},{label:p("profile.transaction_date"),value:e.transactionDate}]);a.appendChild(r),a.appendChild(c),a.appendChild(o),n.appendChild(a)}).catch(()=>{n.innerHTML="";const t=document.createElement("div");t.className="ct-error",t.textContent=p("common.error"),n.appendChild(t)})}function g(t,n){const e=document.createElement("div");e.className="ct-profile-section";const a=document.createElement("h4");a.className="ct-profile-section-title",a.textContent=t,e.appendChild(a);const r=document.createElement("div");return r.className="ct-profile-fields",n.forEach(t=>{if(t.value){const n=document.createElement("div");n.className="ct-profile-field";const e=document.createElement("span");e.className="ct-profile-label",e.textContent=t.label+":";const a=document.createElement("span");a.className="ct-profile-value",a.textContent=t.value,n.appendChild(e),n.appendChild(a),r.appendChild(n)}}),e.appendChild(r),e}function h(n,e){if(!e){const t=document.createElement("div");return t.className="ct-no-selection",t.textContent=p("documents.no_case_selected"),void n.appendChild(t)}const r=document.createElement("div");r.className="ct-loading",r.textContent=p("common.loading"),n.appendChild(r),async function(n){try{const e=await fetch(a.DOCUMENTS,{method:"POST",headers:c(n),body:JSON.stringify({AggregateIdentifier:n})});if(!e.ok){const t=await e.json();throw new Error(`API Error: ${t.Message||e.statusText}`)}const r=await e.json();return t.set("allCaseDocuments",r?.Payload?.Data||[]),t.set("loadedDocsForCaseId",n),r}catch(t){throw new Error(`Failed to fetch documents: ${t.message}`)}}(e).then(t=>{if(n.innerHTML="",!t||!t.data||0===t.data.length){const t=document.createElement("div");return t.className="ct-no-data",t.textContent=p("documents.no_data"),void n.appendChild(t)}const e=document.createElement("table");e.className="ct-table";const r=document.createElement("thead"),o=document.createElement("tr");[p("documents.name"),p("documents.type"),p("documents.size"),p("documents.date"),p("documents.actions")].forEach(t=>{const n=document.createElement("th");n.textContent=t,o.appendChild(n)}),r.appendChild(o),e.appendChild(r);const i=document.createElement("tbody");t.data.forEach(t=>{const n=document.createElement("tr"),e=document.createElement("td");e.textContent=t.name||"N/A",n.appendChild(e);const r=document.createElement("td");r.textContent=t.type||"N/A",n.appendChild(r);const o=document.createElement("td");o.textContent=function(t){if(!t)return"N/A";const n=["Bytes","KB","MB","GB"],e=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,e)*100)/100+" "+n[e]}(t.size),n.appendChild(o);const s=document.createElement("td");s.textContent=t.date?new Date(t.date).toLocaleDateString():"N/A",n.appendChild(s);const d=document.createElement("td"),l=document.createElement("div");l.className="ct-actions";const m=document.createElement("button");m.className="ct-btn ct-btn-sm ct-btn-primary",m.textContent=p("documents.download"),m.onclick=()=>async function(t,n){try{const e=await fetch(`${a.DOWNLOAD}/${t}`,{method:"GET",headers:c()});if(!e.ok)throw new Error(`Download failed: ${e.status}`);const r=await e.blob(),o=window.URL.createObjectURL(r),i=document.createElement("a");return i.href=o,i.download=n||"document",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o),!0}catch(t){throw new Error(`Failed to download document: ${t.message}`)}}(t.id,t.name);const u=document.createElement("button");u.className="ct-btn ct-btn-sm ct-btn-secondary",u.textContent=p("documents.print"),u.onclick=()=>async function(t){try{const n=await fetch(`${a.DOWNLOAD}/${t}`,{method:"GET",headers:c()});if(!n.ok)throw new Error(`Print failed: ${n.status}`);const e=await n.blob(),r=window.URL.createObjectURL(e),o=window.open(r,"_blank");return o&&(o.onload=()=>{o.print()}),!0}catch(t){throw new Error(`Failed to print document: ${t.message}`)}}(t.id),l.appendChild(m),l.appendChild(u),d.appendChild(l),n.appendChild(d),i.appendChild(n)}),e.appendChild(i),n.appendChild(e)}).catch(()=>{n.innerHTML="";const t=document.createElement("div");t.className="ct-error",t.textContent=p("common.error"),n.appendChild(t)})}function f(n,e){if(!e){const t=document.createElement("div");return t.className="ct-no-selection",t.textContent=p("users.no_case_selected"),void n.appendChild(t)}const r=document.createElement("div");r.className="ct-loading",r.textContent=p("common.loading"),n.appendChild(r),async function(n){try{const e=await fetch(a.USERS,{method:"POST",headers:c(n),body:JSON.stringify({AggregateIdentifier:n,First:0,Rows:200,SortField:"",SortOrder:1,Filters:[],LanguageId:"id-ID"})});if(!e.ok){const t=await e.json();throw new Error(`API Error: ${t.Message||e.statusText}`)}const r=await e.json();return t.set("allCaseUsers",r?.Payload?.Data||[]),t.set("loadedUsersForCaseId",n),r}catch(t){throw new Error(`Failed to fetch users: ${t.message}`)}}(e).then(t=>{if(n.innerHTML="",!t||!t.data||0===t.data.length){const t=document.createElement("div");return t.className="ct-no-data",t.textContent=p("users.no_data"),void n.appendChild(t)}const e=document.createElement("table");e.className="ct-table ct-users-table";const a=document.createElement("thead"),r=document.createElement("tr");[p("users.name"),p("users.role"),p("users.email"),p("users.department"),p("users.last_activity")].forEach(t=>{const n=document.createElement("th");n.textContent=t,r.appendChild(n)}),a.appendChild(r),e.appendChild(a);const c=document.createElement("tbody");t.data.forEach(t=>{const n=document.createElement("tr"),e=document.createElement("td");e.textContent=t.name||"N/A",n.appendChild(e);const a=document.createElement("td"),r=document.createElement("span");r.className=`ct-badge ct-role-${(t.role||"").toLowerCase().replace(" ","-")}`,r.textContent=t.role||"N/A",a.appendChild(r),n.appendChild(a);const o=document.createElement("td");o.textContent=t.email||"N/A",n.appendChild(o);const i=document.createElement("td");i.textContent=t.department||"N/A",n.appendChild(i);const s=document.createElement("td");s.textContent=t.lastActivity||"N/A",n.appendChild(s),c.appendChild(n)}),e.appendChild(c),n.appendChild(e)}).catch(()=>{n.innerHTML="";const t=document.createElement("div");t.className="ct-error",t.textContent=p("common.error"),n.appendChild(t)})}const b="en-US",v=Intl.DateTimeFormat().resolvedOptions().timeZone;function x(t,n="short",e={}){if(!t)return e.fallback||"N/A";try{const a=new Date(t);if(isNaN(a.getTime()))return e.fallback||"Invalid Date";const r=e.locale||b,c=e.timezone||v;switch(n){case"short":default:return y(a,r,c);case"long":return w(a,r,c);case"iso":return a.toISOString();case"custom":return _(a,e.pattern||"dd/MM/yyyy");case"relative":return E(a,r);case"time":return k(a,r,c);case"datetime":return C(a,r,c)}}catch(n){return e.fallback||t.toString()}}function y(t,n=b,e=v){return new Intl.DateTimeFormat(n,{day:"2-digit",month:"2-digit",year:"numeric",timeZone:e}).format(t)}function w(t,n=b,e=v){return new Intl.DateTimeFormat(n,{year:"numeric",month:"long",day:"numeric",timeZone:e}).format(t)}function C(t,n=b,e=v){return new Intl.DateTimeFormat(n,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:e}).format(t)}function k(t,n=b,e=v){return new Intl.DateTimeFormat(n,{hour:"2-digit",minute:"2-digit",timeZone:e}).format(t)}function _(t,n="dd/MM/yyyy"){const e=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear(),c=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0"),i=t.getSeconds().toString().padStart(2,"0");return n.replace(/yyyy/g,r).replace(/yy/g,r.toString().slice(-2)).replace(/MM/g,a).replace(/dd/g,e).replace(/HH/g,c).replace(/mm/g,o).replace(/ss/g,i)}function E(t,n=b){try{const e=(new Date).getTime()-t.getTime(),a=Math.floor(e/1e3),r=Math.floor(a/60),c=Math.floor(r/60),o=Math.floor(c/24);return a<60?"just now":r<60?`${r} minute${1!==r?"s":""} ago`:c<24?`${c} hour${1!==c?"s":""} ago`:o<7?`${o} day${1!==o?"s":""} ago`:y(t,n)}catch(n){return t.toString()}}function N(){return new Promise((t,n)=>{if("undefined"!=typeof XLSX)return void t(XLSX);const e=document.createElement("script");e.src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js",e.onload=()=>t(window.XLSX),e.onerror=n,document.head.appendChild(e)})}async function z(t,n="export",e={}){try{const a=await N(),r=a.utils.book_new(),c=a.utils.json_to_sheet(t);return a.utils.book_append_sheet(r,c,e.sheetName||"Data"),a.writeFile(r,`${n}.xlsx`),!0}catch(t){throw new Error(`Export failed: ${t.message}`)}}function S(t){return t.map(t=>({"Route ID":t.id||"",From:t.from||"",To:t.to||"",Status:A(t.status),Created:x(t.created,"short")}))}function I(t,n="USD"){return t?new Intl.NumberFormat("en-US",{style:"currency",currency:n}).format(t):""}function A(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}function T(n,e){if(!e){const t=document.createElement("div");return t.className="ct-no-selection",t.textContent=p("refund.no_case_selected"),void n.appendChild(t)}const a=document.createElement("div");a.className="ct-loading",a.textContent=p("common.loading"),n.appendChild(a),async function(n){try{const e=await fetch("https://coretax.intranet.pajak.go.id/casemanagement/api/casedetail/view",{method:"POST",headers:c(),body:JSON.stringify({caseId:n})});if(!e.ok)throw new Error(`Failed to fetch subprocess: ${e.status}`);const a=await e.json(),r=a.data?.subProcessId;if(!r)throw new Error("SubProcess ID not found");const o=await fetch("https://coretax.intranet.pajak.go.id/casemanagement/api/casereference/view",{method:"POST",headers:c(),body:JSON.stringify({subProcessId:r})});if(!o.ok)throw new Error(`Failed to fetch reference: ${o.status}`);const i=await o.json(),s=i.data?.referenceNumber;if(!s)throw new Error("Reference number not found");const d=await fetch("https://coretax.intranet.pajak.go.id/refundreview/api/refundreview/list",{method:"POST",headers:c(),body:JSON.stringify({referenceNumber:s})});if(!d.ok)throw new Error(`Failed to fetch refund details: ${d.status}`);const l=await d.json();return t.set("refundReviewData",l.data||[]),t.set("filteredRefundData",l.data||[]),l}catch(t){throw new Error(`Failed to fetch refund review: ${t.message}`)}}(e).then(t=>{if(n.innerHTML="",!t||!t.data||0===t.data.length){const t=document.createElement("div");return t.className="ct-no-data",t.textContent=p("refund.no_data"),void n.appendChild(t)}const e=document.createElement("div");e.className="ct-controls";const a=document.createElement("div");a.className="ct-filter-container";const r=document.createElement("select");r.className="ct-select",r.innerHTML=`\n      <option value="">${p("refund.all_statuses")}</option>\n      <option value="pending">${p("refund.pending")}</option>\n      <option value="approved">${p("refund.approved")}</option>\n      <option value="rejected">${p("refund.rejected")}</option>\n    `;const c=document.createElement("input");c.type="number",c.className="ct-input",c.placeholder=p("refund.min_amount"),a.appendChild(r),a.appendChild(c);const o=document.createElement("button");o.className="ct-btn ct-btn-primary",o.textContent=p("refund.export_excel"),o.onclick=()=>function(t){try{const n=function(t){return t.map(t=>({"Case ID":t.caseId||"",Amount:I(t.amount,t.currency),Status:A(t.status),Date:x(t.date,"short"),Reason:t.reason||"","Processed By":t.processedBy||""}))}(t);z(n,"refund_review_data")}catch(t){}}(t.data),e.appendChild(a),e.appendChild(o),n.appendChild(e);const i=document.createElement("table");i.className="ct-table";const s=document.createElement("thead"),d=document.createElement("tr");[p("refund.id"),p("refund.amount"),p("refund.currency"),p("refund.status"),p("refund.date"),p("refund.reason"),p("refund.actions")].forEach(t=>{const n=document.createElement("th");n.textContent=t,d.appendChild(n)}),s.appendChild(d),i.appendChild(s);const l=document.createElement("tbody");D(t.data,l),i.appendChild(l),n.appendChild(i),r.addEventListener("change",()=>{const n=t.data;l.innerHTML="",D(n,l)}),c.addEventListener("input",()=>{const n=t.data;l.innerHTML="",D(n,l)})}).catch(()=>{n.innerHTML="";const t=document.createElement("div");t.className="ct-error",t.textContent=p("common.error"),n.appendChild(t)})}function D(t,n){t.forEach(t=>{const e=document.createElement("tr"),a=document.createElement("td");a.textContent=t.id||"N/A",e.appendChild(a);const r=document.createElement("td");var c,o;r.textContent=(c=t.amount,o=t.currency,c?new Intl.NumberFormat("en-US",{style:"currency",currency:o||"USD"}).format(c):"N/A"),e.appendChild(r);const i=document.createElement("td");i.textContent=t.currency||"USD",e.appendChild(i);const s=document.createElement("td"),d=document.createElement("span");d.className=`ct-badge ct-badge-${t.status||"pending"}`,d.textContent=p(`refund.${t.status||"pending"}`),s.appendChild(d),e.appendChild(s);const l=document.createElement("td");l.textContent=t.date?new Date(t.date).toLocaleDateString():"N/A",e.appendChild(l);const m=document.createElement("td");m.textContent=t.reason||"N/A",m.title=t.reason||"",e.appendChild(m);const u=document.createElement("td"),g=document.createElement("div");if(g.className="ct-actions","pending"===t.status){const n=document.createElement("button");n.className="ct-btn ct-btn-sm ct-btn-success",n.textContent=p("refund.approve"),n.onclick=()=>{t.id};const e=document.createElement("button");e.className="ct-btn ct-btn-sm ct-btn-danger",e.textContent=p("refund.reject"),e.onclick=()=>{t.id},g.appendChild(n),g.appendChild(e)}const h=document.createElement("button");h.className="ct-btn ct-btn-sm ct-btn-secondary",h.textContent=p("refund.view_details"),h.onclick=()=>{t.id},g.appendChild(h),u.appendChild(g),e.appendChild(u),n.appendChild(e)})}class L{constructor(t,n={}){this.container=t,this.options={width:n.width||800,height:n.height||400,nodeWidth:n.nodeWidth||120,nodeHeight:n.nodeHeight||60,spacing:n.spacing||150,...n},this.svg=null,this.nodes=[],this.connections=[]}createSVG(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",this.options.width),this.svg.setAttribute("height",this.options.height),this.svg.setAttribute("viewBox",`0 0 ${this.options.width} ${this.options.height}`),this.svg.className="ct-workflow-diagram";const t=document.createElementNS("http://www.w3.org/2000/svg","style");t.textContent="\n      .ct-workflow-node {\n        cursor: pointer;\n        transition: all 0.3s ease;\n      }\n      .ct-workflow-node:hover {\n        filter: brightness(1.1);\n      }\n      .ct-workflow-node.completed {\n        fill: #28a745;\n        stroke: #1e7e34;\n      }\n      .ct-workflow-node.current {\n        fill: #007bff;\n        stroke: #0056b3;\n        stroke-width: 3;\n      }\n      .ct-workflow-node.pending {\n        fill: #6c757d;\n        stroke: #495057;\n      }\n      .ct-workflow-node.error {\n        fill: #dc3545;\n        stroke: #c82333;\n      }\n      .ct-workflow-text {\n        fill: white;\n        font-family: Arial, sans-serif;\n        font-size: 12px;\n        text-anchor: middle;\n        dominant-baseline: middle;\n        pointer-events: none;\n      }\n      .ct-workflow-connection {\n        stroke: #6c757d;\n        stroke-width: 2;\n        fill: none;\n        marker-end: url(#arrowhead);\n      }\n      .ct-workflow-connection.active {\n        stroke: #007bff;\n        stroke-width: 3;\n      }\n    ",this.svg.appendChild(t);const n=document.createElementNS("http://www.w3.org/2000/svg","defs"),e=document.createElementNS("http://www.w3.org/2000/svg","marker");e.setAttribute("id","arrowhead"),e.setAttribute("markerWidth","10"),e.setAttribute("markerHeight","7"),e.setAttribute("refX","9"),e.setAttribute("refY","3.5"),e.setAttribute("orient","auto");const a=document.createElementNS("http://www.w3.org/2000/svg","polygon");a.setAttribute("points","0 0, 10 3.5, 0 7"),a.setAttribute("fill","#6c757d"),e.appendChild(a),n.appendChild(e),this.svg.appendChild(n),this.container.appendChild(this.svg)}calculateLayout(t){const n=[],e=Math.ceil(Math.sqrt(t.length)),a=Math.ceil(t.length/e),r=(this.options.width-(e-1)*this.options.spacing)/2,c=(this.options.height-(a-1)*this.options.spacing)/2;return t.forEach((t,a)=>{const o=a%e,i=Math.floor(a/e);n.push({x:r+o*this.options.spacing,y:c+i*this.options.spacing,step:t})}),n}createNode(t,n){const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttribute("data-step-index",n);const a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x",t.x-this.options.nodeWidth/2),a.setAttribute("y",t.y-this.options.nodeHeight/2),a.setAttribute("width",this.options.nodeWidth),a.setAttribute("height",this.options.nodeHeight),a.setAttribute("rx","8"),a.setAttribute("ry","8");let r="pending";t.step.completed?r="completed":t.step.current?r="current":t.step.error&&(r="error"),a.className=`ct-workflow-node ${r}`;const c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",t.x),c.setAttribute("y",t.y-5),c.className="ct-workflow-text",c.textContent=t.step.title||`Step ${n+1}`;const o=document.createElementNS("http://www.w3.org/2000/svg","text");if(o.setAttribute("x",t.x),o.setAttribute("y",t.y+10),o.className="ct-workflow-text",o.style.fontSize="10px",o.textContent=`#${n+1}`,e.appendChild(a),e.appendChild(c),e.appendChild(o),e.addEventListener("click",()=>{this.onNodeClick(t.step,n)}),t.step.description){const n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=t.step.description,e.appendChild(n)}return e}createConnection(t,n,e=!1){const a=document.createElementNS("http://www.w3.org/2000/svg","path"),r=n.x-t.x,c=n.y-t.y,o=Math.sqrt(r*r+c*c),i=t.x+r/o*(this.options.nodeWidth/2),s=t.y+c/o*(this.options.nodeHeight/2),d=n.x-r/o*(this.options.nodeWidth/2),l=n.y-c/o*(this.options.nodeHeight/2),p=`M ${i} ${s} Q ${(i+d)/2} ${(s+l)/2-Math.min(50,o/4)} ${d} ${l}`;return a.setAttribute("d",p),a.className="ct-workflow-connection "+(e?"active":""),a}render(t){this.svg||this.createSVG();if(this.svg.querySelectorAll(".ct-workflow-node, .ct-workflow-connection").forEach(t=>t.remove()),!t||!t.steps||0===t.steps.length){const t=document.createElementNS("http://www.w3.org/2000/svg","text");return t.setAttribute("x",this.options.width/2),t.setAttribute("y",this.options.height/2),t.className="ct-workflow-text",t.style.fill="#6c757d",t.textContent="No workflow data available",void this.svg.appendChild(t)}const n=this.calculateLayout(t.steps);for(let t=0;t<n.length-1;t++){const e=n[t].step.completed&&!n[t+1].step.completed,a=this.createConnection(n[t],n[t+1],e);this.svg.appendChild(a)}n.forEach((t,n)=>{const e=this.createNode(t,n);this.svg.appendChild(e)})}onNodeClick(t,n){this.options.onNodeClick&&this.options.onNodeClick(t,n)}updateStatus(t,n){const e=this.svg.querySelector(`[data-step-index="${t}"] .ct-workflow-node`);e&&(e.className=`ct-workflow-node ${n}`)}highlightPath(t){this.svg.querySelectorAll(".ct-workflow-connection").forEach((n,e)=>{e<t?n.classList.add("active"):n.classList.remove("active")})}exportSVG(){return(new XMLSerializer).serializeToString(this.svg)}destroy(){this.svg&&this.svg.parentNode&&this.svg.parentNode.removeChild(this.svg)}}function M(n,e){if(!e){const t=document.createElement("div");return t.className="ct-no-selection",t.textContent=p("routing.no_case_selected"),void n.appendChild(t)}const r=document.createElement("div");r.className="ct-loading",r.textContent=p("common.loading"),n.appendChild(r),async function(n){try{const e=await fetch(a.ROUTING,{method:"POST",headers:c(n),body:JSON.stringify({AggregateIdentifier:n,LanguageId:"id-ID"})});if(!e.ok){const t=await e.json();throw new Error(`API Error: ${t.Message||e.statusText}`)}const r=await e.json();return t.set("routingData",r?.Payload?.Data||[]),t.set("loadedRoutingForCaseId",n),r}catch(t){throw new Error(`Failed to fetch routing: ${t.message}`)}}(e).then(t=>{if(n.innerHTML="",!t||!t.data){const t=document.createElement("div");return t.className="ct-no-data",t.textContent=p("routing.no_data"),void n.appendChild(t)}const e=t.data,a=document.createElement("div");a.className="ct-routing-container";const r=document.createElement("div");r.className="ct-routing-controls";const c=document.createElement("div");c.className="ct-view-toggle";const o=document.createElement("button");o.className="ct-btn ct-btn-primary active",o.textContent=p("routing.diagram_view"),o.onclick=()=>D("diagram");const i=document.createElement("button");i.className="ct-btn ct-btn-secondary",i.textContent=p("routing.timeline_view"),i.onclick=()=>D("timeline");const s=document.createElement("button");s.className="ct-btn ct-btn-secondary",s.textContent=p("routing.table_view"),s.onclick=()=>D("table");const d=document.createElement("button");d.className="ct-btn ct-btn-outline",d.textContent=p("routing.export_excel"),d.onclick=()=>function(t){const n=t.details||t.timeline||[],e={formatFunction:S,sheetName:"Routing Details",title:"Case Routing Data Export",subject:"CoreTabs Routing Export"};z(n,`routing-data-${(new Date).toISOString().split("T")[0]}.xlsx`,e).then(t=>{if(!t.success)throw new Error(t.error);{const t=document.createElement("div");t.className="ct-success-message",t.textContent=p("routing.export_success"),document.body.appendChild(t),setTimeout(()=>t.remove(),3e3)}}).catch(t=>{const n=document.createElement("div");n.className="ct-error-message",n.textContent=p("routing.export_error")+": "+t.message,document.body.appendChild(n),setTimeout(()=>n.remove(),5e3)})}(e),c.appendChild(o),c.appendChild(i),c.appendChild(s),r.appendChild(c),r.appendChild(d);const l=document.createElement("div");l.className="ct-routing-current-status";const m=document.createElement("h4");m.textContent=p("routing.current_status");const u=document.createElement("div");u.className="ct-status-info";const g=document.createElement("div");g.className=`ct-status-badge ct-status-${(e.currentStatus||"").toLowerCase().replace(" ","-")}`,g.textContent=e.currentStatus||"N/A";const h=document.createElement("p");h.textContent=e.statusDescription||"";const f=document.createElement("div");f.className="ct-progress-container";const b=document.createElement("span");b.className="ct-progress-label";const v=e.timeline?e.timeline.filter(t=>t.completed).length:0,x=e.timeline?e.timeline.length:0;b.textContent=`${v}/${x} ${p("routing.steps_completed")}`;const y=document.createElement("div");y.className="ct-progress-bar";const w=document.createElement("div");w.className="ct-progress-fill";const C=x>0?v/x*100:0;w.style.width=`${C}%`,y.appendChild(w),f.appendChild(b),f.appendChild(y),u.appendChild(g),u.appendChild(h),u.appendChild(f),l.appendChild(m),l.appendChild(u);const k=document.createElement("div");k.className="ct-routing-content";const _=document.createElement("div");_.className="ct-routing-view ct-diagram-view active",_.id="diagram-view";const E=document.createElement("h4");E.textContent=p("routing.workflow_diagram"),_.appendChild(E);const N=document.createElement("div");N.className="ct-workflow-diagram-container",_.appendChild(N);const I=function(t){if(!t||!t.timeline)return null;const n=t.timeline.map((t,n)=>({id:t.id||n,title:t.title||`Step ${n+1}`,description:t.description||"",completed:t.completed||!1,current:t.current||!1,error:t.error||!1,assignedTo:t.assignedTo||"",department:t.department||"",startDate:t.startDate||t.date,endDate:t.endDate,duration:t.duration||"",notes:t.notes||""}));return{id:t.id,name:t.name||"Case Routing Workflow",description:t.description||"",steps:n,currentStep:n.findIndex(t=>t.current),totalSteps:n.length,completedSteps:n.filter(t=>t.completed).length}}(e);if(I){const t=new L(N,{width:800,height:400,onNodeClick:(t,n)=>{!function(t,n){const e=document.createElement("div");e.className="ct-modal ct-step-details-modal";const a=document.createElement("div");a.className="ct-modal-content";const r=document.createElement("div");r.className="ct-modal-header";const c=document.createElement("h3");c.textContent=`${t.title||`Step ${n+1}`} - ${p("routing.step_details")}`;const o=document.createElement("button");o.className="ct-modal-close",o.innerHTML="&times;",o.onclick=()=>e.remove(),r.appendChild(c),r.appendChild(o);const i=document.createElement("div");i.className="ct-modal-body";const s=`\n        <div class="ct-step-detail-item">\n          <label>${p("routing.step_title")}:</label>\n          <span>${t.title||"N/A"}</span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.description")}:</label>\n          <span>${t.description||"N/A"}</span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.assigned_to")}:</label>\n          <span>${t.assignedTo||"N/A"}</span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.department")}:</label>\n          <span>${t.department||"N/A"}</span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.status")}:</label>\n          <span class="ct-badge ct-status-${t.completed?"completed":t.current?"current":"pending"}">\n            ${t.completed?p("routing.completed"):t.current?p("routing.current"):p("routing.pending")}\n          </span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.start_date")}:</label>\n          <span>${t.startDate||"N/A"}</span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.end_date")}:</label>\n          <span>${t.endDate||"N/A"}</span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.duration")}:</label>\n          <span>${t.duration||"N/A"}</span>\n        </div>\n        <div class="ct-step-detail-item">\n          <label>${p("routing.notes")}:</label>\n          <span>${t.notes||"N/A"}</span>\n        </div>\n      `;i.innerHTML=s,a.appendChild(r),a.appendChild(i),e.appendChild(a),e.onclick=t=>{t.target===e&&e.remove()},document.body.appendChild(e)}(t,n)}});t.render(I),_.workflowDiagram=t}const A=function(t){const n=document.createElement("div");n.className="ct-routing-view ct-timeline-view",n.id="timeline-view";const e=document.createElement("h4");if(e.textContent=p("routing.workflow_timeline"),n.appendChild(e),t.timeline&&t.timeline.length>0){const e=document.createElement("div");e.className="ct-timeline-list",t.timeline.forEach((t,n)=>{const a=document.createElement("div");a.className=`ct-timeline-item ${t.completed?"completed":""} ${t.current?"current":""}`;const r=document.createElement("div");r.className="ct-timeline-marker";const c=document.createElement("div");c.className="ct-timeline-content";const o=document.createElement("h5");o.textContent=t.title||`Step ${n+1}`;const i=document.createElement("p");i.textContent=t.description||"";const s=document.createElement("div");if(s.className="ct-timeline-meta",t.date){const n=document.createElement("span");n.className="ct-timeline-date",n.textContent=t.date,s.appendChild(n)}if(t.user){const n=document.createElement("span");n.className="ct-timeline-user",n.textContent=`by ${t.user}`,s.appendChild(n)}c.appendChild(o),c.appendChild(i),c.appendChild(s),a.appendChild(r),a.appendChild(c),e.appendChild(a)}),n.appendChild(e)}else{const t=document.createElement("p");t.textContent=p("routing.no_timeline_data"),n.appendChild(t)}return n}(e),T=function(t){const n=document.createElement("div");n.className="ct-routing-view ct-table-view",n.id="table-view";const e=document.createElement("h4");if(e.textContent=p("routing.routing_details"),n.appendChild(e),t.details&&t.details.length>0){const e=document.createElement("div");e.className="ct-table-container";const a=document.createElement("table");a.className="ct-table ct-routing-details-table";const r=document.createElement("thead"),c=document.createElement("tr");[p("routing.step"),p("routing.assigned_to"),p("routing.department"),p("routing.status"),p("routing.start_date"),p("routing.end_date"),p("routing.duration"),p("routing.notes")].forEach(t=>{const n=document.createElement("th");n.textContent=t,c.appendChild(n)}),r.appendChild(c),a.appendChild(r);const o=document.createElement("tbody");t.details.forEach(t=>{const n=document.createElement("tr"),e=document.createElement("td");e.textContent=t.step||"N/A",n.appendChild(e);const a=document.createElement("td");a.textContent=t.assignedTo||"N/A",n.appendChild(a);const r=document.createElement("td");r.textContent=t.department||"N/A",n.appendChild(r);const c=document.createElement("td"),i=document.createElement("span");i.className=`ct-badge ct-status-${(t.status||"").toLowerCase().replace(" ","-")}`,i.textContent=t.status||"N/A",c.appendChild(i),n.appendChild(c);const s=document.createElement("td");s.textContent=t.startDate||"N/A",n.appendChild(s);const d=document.createElement("td");d.textContent=t.endDate||"N/A",n.appendChild(d);const l=document.createElement("td");l.textContent=t.duration||"N/A",n.appendChild(l);const p=document.createElement("td");p.textContent=t.notes||"N/A",p.title=t.notes,n.appendChild(p),o.appendChild(n)}),a.appendChild(o),e.appendChild(a),n.appendChild(e)}else{const t=document.createElement("p");t.textContent=p("routing.no_details_data"),n.appendChild(t)}return n}(e);function D(t){c.querySelectorAll(".ct-btn").forEach(t=>{t.classList.remove("active"),t.classList.add("ct-btn-secondary"),t.classList.remove("ct-btn-primary")});const n="diagram"===t?o:"timeline"===t?i:s;n.classList.add("active"),n.classList.add("ct-btn-primary"),n.classList.remove("ct-btn-secondary");k.querySelectorAll(".ct-routing-view").forEach(t=>t.classList.remove("active"));const e=k.querySelector(`#${t}-view`);e&&e.classList.add("active")}k.appendChild(_),k.appendChild(A),k.appendChild(T),a.appendChild(r),a.appendChild(l),a.appendChild(k),n.appendChild(a)}).catch(()=>{n.innerHTML="";const t=document.createElement("div");t.className="ct-error",t.textContent=p("common.error"),n.appendChild(t)})}function P(){const t=document.getElementById("ct-content");t&&j(t)}function $(t,n){const e=document.getElementById("ct-content");if(e)switch(e.innerHTML="",document.querySelectorAll(".ct-tab-button").forEach(n=>{n.classList.remove("active"),n.dataset.tab===t&&n.classList.add("active")}),t){case"tab-profile":u(e,n);break;case"tab-docs":h(e,n);break;case"tab-users":f(e,n);break;case"tab-refund":T(e,n);break;case"tab-routing":M(e,n);break;default:j(e)}}function j(t){const n=document.createElement("div");n.className="ct-loading",n.textContent=p("loading_my_cases"),t.appendChild(n),o().then(n=>{if(t.innerHTML="",!n||!n.data||0===n.data.length){const n=document.createElement("div");return n.className="ct-no-data",n.textContent=p("cases.no_data"),void t.appendChild(n)}const e=document.createElement("div");e.className="ct-cases-list";const a=document.createElement("h3");a.textContent=p("my_cases"),e.appendChild(a);const r=document.createElement("table");r.className="ct-table ct-cases-table";const c=document.createElement("thead"),o=document.createElement("tr");[p("cases.case_number"),p("cases.status"),p("cases.type"),p("cases.priority"),p("cases.last_update"),p("cases.actions")].forEach(t=>{const n=document.createElement("th");n.textContent=t,o.appendChild(n)}),c.appendChild(o),r.appendChild(c);const i=document.createElement("tbody");n.data.forEach(t=>{const n=document.createElement("tr");n.className="ct-case-row",n.onclick=()=>R(t.id,t.caseNumber);const e=document.createElement("td");e.textContent=t.caseNumber||"N/A",n.appendChild(e);const a=document.createElement("td"),r=document.createElement("span");r.className=`ct-badge ct-status-${(t.status||"").toLowerCase().replace(" ","-")}`,r.textContent=t.status||"N/A",a.appendChild(r),n.appendChild(a);const c=document.createElement("td");c.textContent=t.caseType||"N/A",n.appendChild(c);const o=document.createElement("td"),s=document.createElement("span");s.className=`ct-badge ct-priority-${(t.priority||"").toLowerCase()}`,s.textContent=t.priority||"N/A",o.appendChild(s),n.appendChild(o);const d=document.createElement("td");d.textContent=t.lastUpdate||"N/A",n.appendChild(d);const l=document.createElement("td"),m=document.createElement("button");m.className="ct-btn ct-btn-sm ct-btn-primary",m.textContent=p("cases.select"),m.onclick=n=>{n.stopPropagation(),R(t.id,t.caseNumber)},l.appendChild(m),n.appendChild(l),i.appendChild(n)}),r.appendChild(i),e.appendChild(r),t.appendChild(e)}).catch(()=>{t.innerHTML="";const n=document.createElement("div");n.className="ct-error",n.textContent=p("common.error"),t.appendChild(n)})}function R(n,e){t.set("selectedCaseId",n);const a=document.getElementById("ct-header-title-text"),r=document.getElementById("ct-header-subtitle");a&&(a.textContent=`${p("case")} ${e}`),r&&(r.textContent=p("case_selected_message"));const c=document.getElementById("ct-tab-buttons");c&&(c.style.display="flex"),$("tab-profile",n)}function O(){const n=document.getElementById("coretabs-toggle"),a=document.getElementById("coretabs-sidebar"),r=document.getElementById("coretabs-close");n&&a&&n.addEventListener("click",()=>{a.classList.toggle("open"),a.classList.contains("open")&&P()}),r&&a&&r.addEventListener("click",()=>{a.classList.remove("open")});const c=document.getElementById("ct-language-select");c&&(c.value=t.get("currentLanguage")||"en",c.addEventListener("change",n=>{const a=n.target.value;var r;d[r=a]&&(l=r,localStorage.setItem(e,r)),t.set("currentLanguage",a);const c=document.getElementById("coretabs-sidebar");c&&c.classList.contains("open")&&(F(),P())}));document.querySelectorAll(".ct-tab-button").forEach(n=>{n.addEventListener("click",()=>{$(n.dataset.tab,t.get("selectedCaseId"))})});const o=document.getElementById("ct-nav-back-btn");o&&o.addEventListener("click",()=>{t.set("selectedCaseId",null);const n=document.getElementById("ct-header-title-text"),e=document.getElementById("ct-header-subtitle");n&&(n.textContent=p("no_case_selected")),e&&(e.textContent=p("select_case_message"));const a=document.getElementById("ct-tab-buttons");a&&(a.style.display="none"),o.style.display="none",P()}),document.addEventListener("click",t=>{a&&a.classList.contains("open")&&(a.contains(t.target)||n.contains(t.target)||a.classList.remove("open"))}),document.addEventListener("keydown",t=>{"Escape"===t.key&&a&&a.classList.contains("open")&&a.classList.remove("open"),t.ctrlKey&&t.shiftKey&&"C"===t.key&&(t.preventDefault(),n&&n.click())}),t.subscribe("selectedCaseId",t=>{const n=document.getElementById("ct-nav-back-btn"),e=document.getElementById("ct-tab-buttons");t?(n&&(n.style.display="block"),e&&(e.style.display="flex")):(n&&(n.style.display="none"),e&&(e.style.display="none"))}),t.subscribe("currentLanguage",()=>{F()})}function F(){const n=document.getElementById("ct-nav-title");n&&(n.textContent=p("my_cases"));const e=document.getElementById("ct-nav-back-btn");e&&(e.textContent=p("back"));const a=document.getElementById("ct-header-title-text"),r=document.getElementById("ct-header-subtitle");t.get("selectedCaseId")||(a&&(a.textContent=p("no_case_selected")),r&&(r.textContent=p("select_case_message")));document.querySelectorAll(".ct-tab-button").forEach(t=>{switch(t.dataset.tab){case"tab-profile":t.textContent=p("profile");break;case"tab-docs":t.textContent=p("documents");break;case"tab-users":t.textContent=p("users");break;case"tab-refund":t.textContent=p("refund_review");break;case"tab-routing":t.textContent=p("routing")}})}function U(){const t=document.getElementById("ct-sidebar-toggle");t&&t.remove();const n=document.createElement("button");return n.id="ct-sidebar-toggle",n.className="coretabs-toggle",n.textContent=p("coretabs"),n.setAttribute("aria-label",p("app.toggle")),document.body.appendChild(n),n}const B=document.createElement("style");B.textContent="/* Import Inter font from Google Fonts */\n@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');\n\n/* === DESIGN SYSTEM FOUNDATIONS === */\n:root {\n    /* Color Palette */\n    --ct-white: #ffffff;\n    --ct-primary-50: #f0f1f7;\n    --ct-primary-100: #e1e3ef;\n    --ct-primary-500: #212c5f;\n    --ct-primary-600: #1c2551;\n    --ct-primary-700: #171e43;\n    --ct-primary-800: #121735;\n    \n    /* Secondary color palette (yellow accent) */\n    --ct-secondary-50: #fffbeb;\n    --ct-secondary-100: #fef3c7;\n    --ct-secondary-200: #fde68a;\n    --ct-secondary-300: #fcd34d;\n    --ct-secondary-400: #fbbf24;\n    --ct-secondary-500: #f59e0b;\n    --ct-secondary-600: #d97706;\n    --ct-secondary-700: #b45309;\n    --ct-secondary-800: #92400e;\n    \n    /* Gray color palette */\n    --ct-gray-50: #f9fafb;\n    --ct-gray-100: #f3f4f6;\n    --ct-gray-200: #e5e7eb;\n    --ct-gray-300: #d1d5db;\n    --ct-gray-400: #9ca3af;\n    --ct-gray-500: #6b7280;\n    --ct-gray-600: #4b5563;\n    --ct-gray-700: #374151;\n    --ct-gray-800: #1f2937;\n    --ct-gray-900: #111827;\n    \n    /* Semantic colors */\n    --ct-success-50: #f0fdf4;\n    --ct-success-100: #dcfce7;\n    --ct-success-500: #22c55e;\n    --ct-success-600: #16a34a;\n    --ct-success-700: #15803d;\n    \n    --ct-warning-50: #fffbeb;\n    --ct-warning-100: #fef3c7;\n    --ct-warning-500: #f59e0b;\n    --ct-warning-600: #d97706;\n    --ct-warning-700: #b45309;\n    \n    --ct-error-50: #fef2f2;\n    --ct-error-100: #fee2e2;\n    --ct-error-500: #ef4444;\n    --ct-error-600: #dc2626;\n    --ct-error-700: #b91c1c;\n    \n    --ct-info-50: #eff6ff;\n    --ct-info-100: #dbeafe;\n    --ct-info-500: #3b82f6;\n    --ct-info-600: #2563eb;\n    --ct-info-700: #1d4ed8;\n    \n    /* Typography */\n    --ct-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    --ct-font-size-xs: 0.75rem;   /* 12px */\n    --ct-font-size-sm: 0.875rem;  /* 14px */\n    --ct-font-size-base: 1rem;    /* 16px */\n    --ct-font-size-lg: 1.125rem;  /* 18px */\n    --ct-font-size-xl: 1.25rem;   /* 20px */\n    --ct-font-size-2xl: 1.5rem;   /* 24px */\n    --ct-font-size-3xl: 1.875rem; /* 30px */\n    \n    --ct-font-weight-normal: 400;\n    --ct-font-weight-medium: 500;\n    --ct-font-weight-semibold: 600;\n    --ct-font-weight-bold: 700;\n    \n    --ct-line-height-tight: 1.25;\n    --ct-line-height-snug: 1.375;\n    --ct-line-height-normal: 1.5;\n    --ct-line-height-relaxed: 1.625;\n    \n    /* Spacing System */\n    --ct-space-px: 1px;\n    --ct-space-0: 0;\n    --ct-space-1: 0.25rem;  /* 4px */\n    --ct-space-2: 0.5rem;   /* 8px */\n    --ct-space-3: 0.75rem;  /* 12px */\n    --ct-space-4: 1rem;     /* 16px */\n    --ct-space-5: 1.25rem;  /* 20px */\n    --ct-space-6: 1.5rem;   /* 24px */\n    --ct-space-8: 2rem;     /* 32px */\n    --ct-space-10: 2.5rem;  /* 40px */\n    --ct-space-12: 3rem;    /* 48px */\n    --ct-space-16: 4rem;    /* 64px */\n    --ct-space-20: 5rem;    /* 80px */\n    --ct-space-24: 6rem;    /* 96px */\n    --ct-space-32: 8rem;    /* 128px */\n    \n    /* Border Radius */\n    --ct-radius-none: 0;\n    --ct-radius-sm: 0.125rem;  /* 2px */\n    --ct-radius-base: 0.25rem; /* 4px */\n    --ct-radius-md: 0.375rem;  /* 6px */\n    --ct-radius-lg: 0.5rem;    /* 8px */\n    --ct-radius-xl: 0.75rem;   /* 12px */\n    --ct-radius-2xl: 1rem;     /* 16px */\n    --ct-radius-full: 9999px;\n    \n    /* Shadows */\n    --ct-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n    --ct-shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n    --ct-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n    --ct-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n    --ct-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n    \n    /* Transitions */\n    --ct-transition-fast: 150ms ease-in-out;\n    --ct-transition-normal: 250ms ease-in-out;\n    --ct-transition-slow: 350ms ease-in-out;\n    \n    /* Layout */\n    --ct-sidebar-width: 950px;\n    --ct-sidebar-width-lg: 850px;\n    --ct-sidebar-width-md: 700px;\n    --ct-sidebar-width-sm: 100vw;\n    --ct-sidebar-max-height: 800px;\n    \n    /* Z-Index */\n    --ct-z-index-modal: 9999;\n    \n    /* Letter Spacing */\n    --ct-letter-spacing-wide: 1px;\n    \n    /* Legacy compatibility - map old variables to new ones */\n    --primary-color: var(--ct-primary-500);\n    --secondary-color: var(--ct-gray-600);\n    --success-color: var(--ct-success-500);\n    --warning-color: var(--ct-warning-500);\n    --error-color: var(--ct-error-500);\n    --info-color: var(--ct-info-500);\n    \n    --text-primary: var(--ct-gray-900);\n    --text-secondary: var(--ct-gray-600);\n    --text-disabled: var(--ct-gray-400);\n    \n    --background-primary: var(--ct-white);\n    --background-secondary: var(--ct-gray-50);\n    --background-paper: var(--ct-white);\n    \n    --border-color: var(--ct-gray-200);\n    --divider-color: var(--ct-gray-200);\n    \n    --shadow-1: var(--ct-shadow-sm);\n    --shadow-2: var(--ct-shadow-md);\n    --shadow-3: var(--ct-shadow-lg);\n    \n    --border-radius: var(--ct-radius-base);\n    --border-radius-large: var(--ct-radius-lg);\n    \n    --font-family: var(--ct-font-family);\n    --font-size-small: var(--ct-font-size-xs);\n    --font-size-normal: var(--ct-font-size-sm);\n    --font-size-large: var(--ct-font-size-lg);\n    --font-size-xlarge: var(--ct-font-size-xl);\n    \n    --spacing-xs: var(--ct-space-1);\n    --spacing-sm: var(--ct-space-2);\n    --spacing-md: var(--ct-space-4);\n    --spacing-lg: var(--ct-space-6);\n    --spacing-xl: var(--ct-space-8);\n    \n    --transition-fast: var(--ct-transition-fast);\n    --transition-normal: var(--ct-transition-normal);\n    --transition-slow: var(--ct-transition-slow);\n}\n\n/* Apply Inter font globally to ensure consistent typography */\n* {\n    font-family: var(--ct-font-family);\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n/* Optimize text rendering for better readability */\nbody, \n#ct-sidebar,\n.ct-table,\n.ct-results-table {\n    font-family: var(--ct-font-family);\n    text-rendering: optimizeLegibility;\n}";document.head.querySelector("style[data-userscript]")||(B.setAttribute("data-userscript","true"),document.head.appendChild(B));const H=document.createElement("style");H.textContent="/* === CORE LAYOUT === */\n#ct-sidebar {\n    position: fixed;\n    top: 0;\n    right: calc(-1 * var(--ct-sidebar-width));\n    width: var(--ct-sidebar-width);\n    height: 100vh;\n    background-color: var(--ct-white);\n    box-shadow: var(--ct-shadow-xl);\n    z-index: var(--ct-z-index-modal);\n    transition: right var(--ct-transition-normal);\n    font-family: var(--ct-font-family);\n    font-size: var(--ct-font-size-sm);\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    max-height: var(--ct-sidebar-max-height);\n    border-radius: var(--ct-radius-lg) 0 0 var(--ct-radius-lg);\n}\n\n#ct-sidebar.open {\n    right: 0;\n}\n\n/* === SIDEBAR TOGGLE === */\n#ct-sidebar-toggle {\n    position: fixed;\n    top: 50%;\n    right: 0;\n    transform: translateY(-50%);\n    background-color: var(--ct-primary-700);\n    color: var(--ct-white);\n    border: none;\n    height: var(--ct-space-16);\n    width: var(--ct-space-8);\n    border-radius: var(--ct-radius-lg) 0 0 var(--ct-radius-lg);\n    cursor: pointer;\n    writing-mode: vertical-rl;\n    text-orientation: mixed;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: calc(var(--ct-z-index-modal) + 1);\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-bold);\n    letter-spacing: var(--ct-letter-spacing-wide);\n    padding: var(--ct-space-3) var(--ct-space-2);\n    margin-right: var(--ct-space-1);\n    transition: all var(--ct-transition-fast);\n    box-shadow: var(--ct-shadow-md);\n}\n\n#ct-sidebar-toggle:hover {\n    background-color: var(--ct-primary-800);\n    transform: translateY(-50%) translateX(-2px);\n    box-shadow: var(--ct-shadow-lg);\n}\n\n#ct-sidebar-toggle:focus {\n    outline: 3px solid var(--ct-primary-300);\n    outline-offset: 3px;\n}\n\n/* === HEADER AREA === */\n#ct-header {\n    background: linear-gradient(135deg, var(--ct-primary-600) 0%, var(--ct-primary-700) 100%);\n    color: var(--ct-white);\n    padding: var(--ct-space-4);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-shrink: 0;\n    border-bottom: 1px solid var(--ct-primary-800);\n    box-shadow: var(--ct-shadow-sm);\n}\n\n#ct-profile-left {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n}\n\n#ct-profile-right {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n}\n\n#ct-navigation-area {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n}\n\n#ct-nav-back-btn {\n    background: none;\n    border: 1px solid var(--ct-white);\n    color: var(--ct-white);\n    padding: var(--ct-space-2) var(--ct-space-3);\n    border-radius: var(--ct-radius-md);\n    cursor: pointer;\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    transition: all var(--ct-transition-fast);\n    display: none;\n}\n\n#ct-nav-back-btn:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    transform: translateY(-1px);\n}\n\n#ct-nav-title {\n    font-size: var(--ct-font-size-lg);\n    font-weight: var(--ct-font-weight-bold);\n}\n\n#ct-profile-info {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    gap: var(--ct-space-1);\n    text-align: right;\n}\n\n#ct-profile-name {\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-semibold);\n    margin: 0;\n}\n\n#ct-profile-role {\n    font-size: var(--ct-font-size-xs);\n    opacity: 0.9;\n    margin: 0;\n}\n\n.ct-language-buttons {\n    display: flex;\n    gap: var(--ct-space-1);\n    background-color: rgba(255, 255, 255, 0.1);\n    border-radius: var(--ct-radius-md);\n    padding: var(--ct-space-1);\n}\n\n.ct-language-btn {\n    background: none;\n    border: none;\n    color: var(--ct-white);\n    padding: var(--ct-space-1) var(--ct-space-2);\n    border-radius: var(--ct-radius-sm);\n    cursor: pointer;\n    font-size: var(--ct-font-size-xs);\n    font-weight: var(--ct-font-weight-medium);\n    transition: all var(--ct-transition-fast);\n    opacity: 0.7;\n}\n\n.ct-language-btn.active,\n.ct-language-btn:hover {\n    background-color: rgba(255, 255, 255, 0.2);\n    opacity: 1;\n}\n\n/* === SCREEN LAYOUT === */\n.ct-screen {\n    display: none;\n    flex: 1;\n    flex-direction: column;\n    height: 100%;\n}\n\n.ct-screen.active {\n    display: flex;\n}\n\n#ct-my-cases-screen {\n    background-color: var(--ct-gray-50);\n    padding: 0;\n}\n\n#ct-case-details-screen {\n    background-color: var(--ct-white);\n}\n\n#tab-my-cases {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    overflow-y: auto;\n    height: 100%;\n    max-height: calc(100vh - 100px);\n    padding: var(--ct-space-4);\n}\n\n/* === HEADERS === */\n.ct-screen-header {\n    padding: var(--ct-space-4);\n    background-color: var(--ct-gray-800);\n    color: var(--ct-white);\n    font-size: var(--ct-font-size-lg);\n    font-weight: var(--ct-font-weight-bold);\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n    flex-shrink: 0;\n}\n\n#ct-header-area {\n    padding: var(--ct-space-4);\n    background-color: var(--ct-gray-100);\n    color: var(--ct-gray-800);\n    border-bottom: 1px solid var(--ct-gray-200);\n    flex-shrink: 0;\n}\n\n#ct-header-content {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: var(--ct-space-4);\n}\n\n#ct-header-left {\n    flex: 1;\n}\n\n#ct-header-title {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n    margin-bottom: var(--ct-space-2);\n}\n\n#ct-header-initial {\n    width: var(--ct-space-12);\n    height: var(--ct-space-12);\n    background: linear-gradient(135deg, var(--ct-primary-500) 0%, var(--ct-primary-600) 100%);\n    color: var(--ct-white);\n    border-radius: var(--ct-radius-full);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: var(--ct-font-size-lg);\n    font-weight: var(--ct-font-weight-bold);\n    flex-shrink: 0;\n}\n\n#ct-header-title-text {\n    font-size: var(--ct-font-size-xl);\n    font-weight: var(--ct-font-weight-bold);\n    color: var(--ct-gray-900);\n    margin: 0;\n}\n\n#ct-header-subtitle {\n    font-size: var(--ct-font-size-sm);\n    color: var(--ct-gray-600);\n    margin: 0;\n}\n\n#ct-header-actions {\n    display: flex;\n    gap: var(--ct-space-2);\n    align-items: center;\n}\n\n/* === TAB NAVIGATION === */\n#ct-tab-bar {\n    display: flex;\n    background-color: var(--ct-white);\n    border-bottom: 1px solid var(--ct-gray-200);\n    padding: 0 var(--ct-space-4);\n    gap: var(--ct-space-1);\n    flex-shrink: 0;\n}\n\n.ct-tab-button {\n    background: none;\n    border: none;\n    padding: var(--ct-space-3) var(--ct-space-4);\n    cursor: pointer;\n    border-bottom: 3px solid transparent;\n    transition: all var(--ct-transition-fast);\n    color: var(--ct-gray-600);\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    position: relative;\n    white-space: nowrap;\n}\n\n.ct-tab-button:hover {\n    background-color: var(--ct-gray-50);\n    color: var(--ct-gray-800);\n}\n\n.ct-tab-button.active {\n    color: var(--ct-primary-600);\n    border-bottom-color: var(--ct-primary-500);\n    background-color: var(--ct-primary-50);\n}\n\n.ct-tab-button:focus {\n    outline: 2px solid var(--ct-primary-300);\n    outline-offset: -2px;\n}\n\n#ct-tab-content-area {\n    flex: 1;\n    overflow-y: auto;\n    background-color: var(--ct-white);\n    padding: var(--ct-space-4);\n}\n\n.ct-tab-panel {\n    display: none;\n    flex-direction: column;\n    height: 100%;\n    max-height: calc(100vh - 200px);\n    overflow-y: auto;\n}\n\n.ct-tab-panel.active {\n    display: flex;\n}\n\n/* === TABLES === */\n.results-container {\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: auto;\n    padding: 0;\n    margin: var(--ct-space-3) 0;\n    border: var(--ct-space-px) solid var(--ct-gray-200);\n    border-radius: var(--ct-radius-lg);\n    background-color: var(--ct-white);\n    box-shadow: var(--ct-shadow-sm);\n    height: calc(100% - 120px);\n    min-height: var(--ct-space-20);\n    position: relative;\n}\n\n.ct-results-table {\n    width: 100%;\n    border-collapse: collapse;\n    font-size: var(--ct-font-size-sm);\n    background-color: var(--ct-white);\n}\n\n.ct-results-table th {\n    background: linear-gradient(180deg, var(--ct-gray-50) 0%, var(--ct-gray-100) 100%);\n    color: var(--ct-gray-800);\n    font-weight: var(--ct-font-weight-semibold);\n    padding: var(--ct-space-3) var(--ct-space-4);\n    text-align: left;\n    border-bottom: 2px solid var(--ct-gray-200);\n    font-size: var(--ct-font-size-xs);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n}\n\n.ct-results-table td {\n    padding: var(--ct-space-3) var(--ct-space-4);\n    border-bottom: 1px solid var(--ct-gray-100);\n    color: var(--ct-gray-700);\n    font-size: var(--ct-font-size-sm);\n    vertical-align: top;\n}\n\n.ct-results-table tbody tr {\n    transition: background-color var(--ct-transition-fast);\n    cursor: pointer;\n}\n\n.ct-results-table tbody tr:hover {\n    background-color: var(--ct-primary-50);\n}\n\n.ct-results-table tbody tr:nth-child(even) {\n    background-color: var(--ct-gray-25);\n}\n\n.ct-results-table tbody tr:nth-child(even):hover {\n    background-color: var(--ct-primary-50);\n}\n\n/* === BUTTONS === */\n.ct-btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: var(--ct-space-2);\n    padding: var(--ct-space-2) var(--ct-space-4);\n    border: 1px solid transparent;\n    border-radius: var(--ct-radius-md);\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    text-decoration: none;\n    cursor: pointer;\n    transition: all var(--ct-transition-fast);\n    white-space: nowrap;\n}\n\n.ct-btn-primary {\n    background-color: var(--ct-primary-500);\n    color: var(--ct-white);\n    border-color: var(--ct-primary-500);\n}\n\n.ct-btn-primary:hover {\n    background-color: var(--ct-primary-600);\n    border-color: var(--ct-primary-600);\n    transform: translateY(-1px);\n    box-shadow: var(--ct-shadow-md);\n}\n\n.ct-btn-secondary {\n    background-color: var(--ct-white);\n    color: var(--ct-gray-700);\n    border-color: var(--ct-gray-300);\n}\n\n.ct-btn-secondary:hover {\n    background-color: var(--ct-gray-50);\n    border-color: var(--ct-gray-400);\n}\n\n.ct-btn-sm {\n    padding: var(--ct-space-1) var(--ct-space-3);\n    font-size: var(--ct-font-size-xs);\n}\n\n/* === BADGES === */\n.ct-badge {\n    display: inline-flex;\n    align-items: center;\n    padding: var(--ct-space-1) var(--ct-space-2);\n    border-radius: var(--ct-radius-full);\n    font-size: var(--ct-font-size-xs);\n    font-weight: var(--ct-font-weight-medium);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.ct-badge-success {\n    background-color: var(--ct-success-100);\n    color: var(--ct-success-700);\n}\n\n.ct-badge-warning {\n    background-color: var(--ct-warning-100);\n    color: var(--ct-warning-700);\n}\n\n.ct-badge-error {\n    background-color: var(--ct-error-100);\n    color: var(--ct-error-700);\n}\n\n.ct-badge-info {\n    background-color: var(--ct-info-100);\n    color: var(--ct-info-700);\n}\n\n/* === LOADING STATES === */\n.ct-loading {\n    text-align: center;\n    padding: var(--ct-space-8);\n    color: var(--ct-gray-500);\n    font-size: var(--ct-font-size-sm);\n}\n\n.ct-error {\n    background-color: var(--ct-error-50);\n    color: var(--ct-error-700);\n    padding: var(--ct-space-4);\n    border-radius: var(--ct-radius-md);\n    margin-bottom: var(--ct-space-4);\n    border-left: 4px solid var(--ct-error-500);\n    font-size: var(--ct-font-size-sm);\n}\n\n/* === FILTERS === */\n.filter-container {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n    padding: var(--ct-space-4);\n    background-color: var(--ct-gray-50);\n    border-bottom: 1px solid var(--ct-gray-200);\n    flex-wrap: wrap;\n}\n\n.filter-group {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-2);\n}\n\n.filter-label {\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    color: var(--ct-gray-700);\n    white-space: nowrap;\n}\n\n.filter-select {\n    padding: var(--ct-space-2) var(--ct-space-3);\n    border: 1px solid var(--ct-gray-300);\n    border-radius: var(--ct-radius-md);\n    font-size: var(--ct-font-size-sm);\n    background-color: var(--ct-white);\n    color: var(--ct-gray-700);\n    min-width: 120px;\n}\n\n.filter-select:focus {\n    outline: 2px solid var(--ct-primary-300);\n    border-color: var(--ct-primary-500);\n}\n\n/* === SHIMMER LOADING === */\n@keyframes ct-shimmer {\n    0% { background-position: -200% 0; }\n    100% { background-position: 200% 0; }\n}\n\n.ct-skeleton {\n    background: linear-gradient(\n        90deg,\n        var(--ct-gray-100) 25%,\n        var(--ct-gray-200) 50%,\n        var(--ct-gray-100) 75%\n    );\n    background-size: 200% 100%;\n    animation: ct-shimmer 1.5s infinite;\n    border-radius: var(--ct-radius-sm);\n}\n\n.ct-skeleton--text {\n    height: 1em;\n    margin: 0.25em 0;\n}\n\n.ct-skeleton--title {\n    height: 1.5em;\n    margin: 0.5em 0;\n}\n\n.ct-skeleton--button {\n    height: 2.5em;\n    width: 6em;\n}\n\n/* === CLEAN UI - HIDE SCROLLBARS === */\n#ct-sidebar,\n.ct-tab-panel,\n#ct-tab-content-area,\n.results-container,\n#tab-my-cases,\n.ct-results-table-container {\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n}\n\n#ct-sidebar::-webkit-scrollbar,\n.ct-tab-panel::-webkit-scrollbar,\n#ct-tab-content-area::-webkit-scrollbar,\n.results-container::-webkit-scrollbar,\n#tab-my-cases::-webkit-scrollbar,\n.ct-results-table-container::-webkit-scrollbar {\n    display: none;\n}\n\n/* === LEGACY COMPATIBILITY === */\n.coretabs-sidebar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: var(--ct-sidebar-width);\n  height: 100vh;\n  background-color: var(--ct-white);\n  box-shadow: var(--ct-shadow-lg);\n  z-index: var(--ct-z-sidebar);\n  transition: transform var(--ct-transition-normal);\n  transform: translateX(-100%);\n  font-family: var(--ct-font-family);\n  display: flex;\n  flex-direction: column;\n}\n\n.coretabs-header {\n  background-color: var(--ct-gray-100);\n  color: var(--ct-gray-800);\n  padding: var(--ct-space-4);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid var(--ct-gray-200);\n  flex-shrink: 0;\n}\n\n.coretabs-content {\n  flex: 1;\n  overflow-y: auto;\n  background-color: var(--ct-white);\n  padding: var(--ct-space-4);\n}\n\n.coretabs-toggle {\n  position: fixed;\n  top: var(--ct-space-4);\n  left: var(--ct-space-4);\n  background-color: var(--ct-primary-600);\n  color: var(--ct-white);\n  border: none;\n  width: var(--ct-space-10);\n  height: var(--ct-space-10);\n  border-radius: var(--ct-radius-md);\n  cursor: pointer;\n  box-shadow: var(--ct-shadow-md);\n  z-index: var(--ct-z-toggle);\n  transition: all var(--ct-transition-fast);\n}\n\n.coretabs-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: var(--ct-font-size-sm);\n  background-color: var(--ct-white);\n}\n\n.coretabs-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--ct-space-8);\n  color: var(--ct-gray-600);\n  font-size: var(--ct-font-size-sm);\n}\n\n.coretabs-error {\n  background-color: var(--ct-error-50);\n  border: 1px solid var(--ct-error-200);\n  color: var(--ct-error-700);\n  padding: var(--ct-space-4);\n  border-radius: var(--ct-radius-md);\n  margin: var(--ct-space-4) 0;\n}";document.head.querySelector("style[data-userscript]")||(H.setAttribute("data-userscript","true"),document.head.appendChild(H));const G=document.createElement("style");G.textContent="/* === RESPONSIVE DESIGN === */\n\n/* Large screens (1200px and up) */\n@media (min-width: 1200px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width);\n        right: calc(-1 * var(--ct-sidebar-width));\n    }\n}\n\n/* Medium screens (992px to 1199px) */\n@media (max-width: 1199px) and (min-width: 992px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width-lg);\n        right: calc(-1 * var(--ct-sidebar-width-lg));\n    }\n}\n\n/* Small screens (768px to 991px) */\n@media (max-width: 991px) and (min-width: 768px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width-md);\n        right: calc(-1 * var(--ct-sidebar-width-md));\n    }\n    \n    #ct-header {\n        padding: var(--ct-space-3);\n    }\n    \n    #ct-navigation-area {\n        flex-direction: column;\n        align-items: flex-start;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-right {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-info {\n        align-items: flex-start;\n        text-align: left;\n    }\n    \n    .ct-language-buttons {\n        justify-content: center;\n    }\n    \n    #ct-tab-bar {\n        flex-wrap: wrap;\n    }\n    \n    .ct-tab-button {\n        flex: 1;\n        min-width: 0;\n        padding: var(--ct-space-2);\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-tab-content-area {\n        padding: var(--ct-space-2);\n    }\n    \n    .filter-container {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n    }\n    \n    .filter-group {\n        justify-content: space-between;\n    }\n    \n    .filter-select {\n        min-width: 100px;\n    }\n}\n\n/* Extra small screens (up to 767px) */\n@media (max-width: 767px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width-sm);\n        right: calc(-1 * var(--ct-sidebar-width-sm));\n        border-radius: 0;\n    }\n    \n    #ct-sidebar-toggle {\n        top: var(--ct-space-4);\n        right: var(--ct-space-4);\n        width: var(--ct-space-12);\n        height: var(--ct-space-12);\n        border-radius: var(--ct-radius-full);\n        writing-mode: initial;\n        text-orientation: initial;\n        font-size: var(--ct-font-size-lg);\n        padding: 0;\n        margin-right: 0;\n    }\n    \n    #ct-header {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-3);\n        padding: var(--ct-space-3);\n    }\n    \n    #ct-navigation-area {\n        flex-direction: column;\n        align-items: flex-start;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-right {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-info {\n        align-items: flex-start;\n        text-align: left;\n    }\n    \n    .ct-language-buttons {\n        justify-content: center;\n    }\n    \n    #ct-tab-bar {\n        flex-wrap: wrap;\n        padding: 0 var(--ct-space-2);\n    }\n    \n    .ct-tab-button {\n        flex: 1;\n        min-width: 0;\n        padding: var(--ct-space-2);\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-tab-content-area {\n        padding: var(--ct-space-2);\n    }\n    \n    .filter-container {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n        padding: var(--ct-space-2);\n    }\n    \n    .filter-group {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-1);\n    }\n    \n    .filter-select {\n        width: 100%;\n        min-width: auto;\n    }\n    \n    .ct-results-table {\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    .ct-results-table th,\n    .ct-results-table td {\n        padding: var(--ct-space-2);\n    }\n    \n    .ct-btn {\n        width: 100%;\n        justify-content: center;\n    }\n    \n    .ct-btn-sm {\n        padding: var(--ct-space-2);\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-header-content {\n        flex-direction: column;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-header-actions {\n        flex-direction: column;\n        width: 100%;\n        gap: var(--ct-space-1);\n    }\n    \n    .results-container {\n        margin: var(--ct-space-2) 0;\n        height: calc(100% - 80px);\n    }\n}\n\n/* Ultra small screens (up to 480px) */\n@media (max-width: 480px) {\n    #ct-sidebar-toggle {\n        top: var(--ct-space-2);\n        right: var(--ct-space-2);\n        width: var(--ct-space-10);\n        height: var(--ct-space-10);\n        font-size: var(--ct-font-size-base);\n    }\n    \n    #ct-header {\n        padding: var(--ct-space-2);\n    }\n    \n    #ct-nav-title {\n        font-size: var(--ct-font-size-base);\n    }\n    \n    #ct-profile-name {\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-profile-role {\n        font-size: 10px;\n    }\n    \n    .ct-language-btn {\n        padding: var(--ct-space-1);\n        font-size: 10px;\n    }\n    \n    #ct-tab-bar {\n        padding: 0 var(--ct-space-1);\n    }\n    \n    .ct-tab-button {\n        padding: var(--ct-space-1) var(--ct-space-2);\n        font-size: 10px;\n    }\n    \n    #ct-tab-content-area {\n        padding: var(--ct-space-1);\n    }\n    \n    .filter-container {\n        padding: var(--ct-space-1);\n    }\n    \n    .ct-results-table {\n        font-size: 10px;\n    }\n    \n    .ct-results-table th,\n    .ct-results-table td {\n        padding: var(--ct-space-1);\n    }\n    \n    #ct-header-title-text {\n        font-size: var(--ct-font-size-lg);\n    }\n    \n    #ct-header-subtitle {\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-header-initial {\n        width: var(--ct-space-10);\n        height: var(--ct-space-10);\n        font-size: var(--ct-font-size-base);\n    }\n}\n\n/* Print styles */\n@media print {\n    #ct-sidebar,\n    #ct-sidebar-toggle {\n        display: none !important;\n    }\n    \n    .ct-results-table {\n        font-size: 10px;\n    }\n    \n    .ct-results-table th,\n    .ct-results-table td {\n        padding: var(--ct-space-1);\n        border: 1px solid var(--ct-gray-300);\n    }\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n    #ct-sidebar {\n        border: 2px solid var(--ct-gray-900);\n    }\n    \n    .ct-tab-button.active {\n        border-bottom-width: 4px;\n    }\n    \n    .ct-results-table th {\n        border-bottom-width: 3px;\n    }\n    \n    .ct-btn {\n        border-width: 2px;\n    }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n    * {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n    }\n    \n    #ct-sidebar-toggle:hover {\n        transform: none;\n    }\n    \n    .ct-btn-primary:hover {\n        transform: none;\n    }\n}\n\n/* Dark mode support (if implemented) */\n@media (prefers-color-scheme: dark) {\n    :root {\n        --ct-white: #1a1a1a;\n        --ct-gray-50: #2a2a2a;\n        --ct-gray-100: #3a3a3a;\n        --ct-gray-900: #f0f0f0;\n    }\n}\n\n/* Legacy compatibility */\n@media (max-width: 768px) {\n    .coretabs-sidebar {\n        width: 100vw;\n        right: -100vw;\n    }\n    \n    .coretabs-sidebar.open {\n        right: 0;\n    }\n    \n    .coretabs-toggle {\n        top: 10px;\n        right: 10px;\n        width: 40px;\n        height: 40px;\n        font-size: var(--font-size-normal);\n    }\n    \n    .coretabs-content {\n        padding: var(--spacing-sm);\n    }\n    \n    .coretabs-table {\n        font-size: 11px;\n    }\n    \n    .coretabs-table th,\n    .coretabs-table td {\n        padding: var(--spacing-xs);\n    }\n}\n\n@media (max-width: 480px) {\n    .coretabs-header {\n        padding: var(--spacing-sm);\n    }\n    \n    .coretabs-title {\n        font-size: var(--font-size-normal);\n    }\n    \n    .coretabs-tabs {\n        flex-wrap: wrap;\n    }\n    \n    .coretabs-tab {\n        flex: 1;\n        min-width: 80px;\n        padding: var(--spacing-xs) var(--spacing-sm);\n        font-size: var(--font-size-small);\n    }\n}";document.head.querySelector("style[data-userscript]")||(G.setAttribute("data-userscript","true"),document.head.appendChild(G));const K="undefined"!=typeof __VERSION__?__VERSION__:"1.0.0";class V{constructor(){this.initialized=!1,this.version=K,this.updateChecker=new m,this.injectStyles()}injectStyles(){if(document.querySelector("style[data-coretabs]"))return;const t=document.createElement("style");t.setAttribute("data-coretabs","true"),t.textContent="/* Import Inter font from Google Fonts */\n@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');\n\n/* === DESIGN SYSTEM FOUNDATIONS === */\n:root {\n    /* Color Palette */\n    --ct-white: #ffffff;\n    --ct-primary-50: #f0f1f7;\n    --ct-primary-100: #e1e3ef;\n    --ct-primary-500: #212c5f;\n    --ct-primary-600: #1c2551;\n    --ct-primary-700: #171e43;\n    --ct-primary-800: #121735;\n    \n    /* Secondary color palette (yellow accent) */\n    --ct-secondary-50: #fffbeb;\n    --ct-secondary-100: #fef3c7;\n    --ct-secondary-200: #fde68a;\n    --ct-secondary-300: #fcd34d;\n    --ct-secondary-400: #fbbf24;\n    --ct-secondary-500: #f59e0b;\n    --ct-secondary-600: #d97706;\n    --ct-secondary-700: #b45309;\n    --ct-secondary-800: #92400e;\n    \n    /* Gray color palette */\n    --ct-gray-50: #f9fafb;\n    --ct-gray-100: #f3f4f6;\n    --ct-gray-200: #e5e7eb;\n    --ct-gray-300: #d1d5db;\n    --ct-gray-400: #9ca3af;\n    --ct-gray-500: #6b7280;\n    --ct-gray-600: #4b5563;\n    --ct-gray-700: #374151;\n    --ct-gray-800: #1f2937;\n    --ct-gray-900: #111827;\n    \n    /* Semantic colors */\n    --ct-success-50: #f0fdf4;\n    --ct-success-100: #dcfce7;\n    --ct-success-500: #22c55e;\n    --ct-success-600: #16a34a;\n    --ct-success-700: #15803d;\n    \n    --ct-warning-50: #fffbeb;\n    --ct-warning-100: #fef3c7;\n    --ct-warning-500: #f59e0b;\n    --ct-warning-600: #d97706;\n    --ct-warning-700: #b45309;\n    \n    --ct-error-50: #fef2f2;\n    --ct-error-100: #fee2e2;\n    --ct-error-500: #ef4444;\n    --ct-error-600: #dc2626;\n    --ct-error-700: #b91c1c;\n    \n    --ct-info-50: #eff6ff;\n    --ct-info-100: #dbeafe;\n    --ct-info-500: #3b82f6;\n    --ct-info-600: #2563eb;\n    --ct-info-700: #1d4ed8;\n    \n    /* Typography */\n    --ct-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    --ct-font-size-xs: 0.75rem;   /* 12px */\n    --ct-font-size-sm: 0.875rem;  /* 14px */\n    --ct-font-size-base: 1rem;    /* 16px */\n    --ct-font-size-lg: 1.125rem;  /* 18px */\n    --ct-font-size-xl: 1.25rem;   /* 20px */\n    --ct-font-size-2xl: 1.5rem;   /* 24px */\n    --ct-font-size-3xl: 1.875rem; /* 30px */\n    \n    --ct-font-weight-normal: 400;\n    --ct-font-weight-medium: 500;\n    --ct-font-weight-semibold: 600;\n    --ct-font-weight-bold: 700;\n    \n    --ct-line-height-tight: 1.25;\n    --ct-line-height-snug: 1.375;\n    --ct-line-height-normal: 1.5;\n    --ct-line-height-relaxed: 1.625;\n    \n    /* Spacing System */\n    --ct-space-px: 1px;\n    --ct-space-0: 0;\n    --ct-space-1: 0.25rem;  /* 4px */\n    --ct-space-2: 0.5rem;   /* 8px */\n    --ct-space-3: 0.75rem;  /* 12px */\n    --ct-space-4: 1rem;     /* 16px */\n    --ct-space-5: 1.25rem;  /* 20px */\n    --ct-space-6: 1.5rem;   /* 24px */\n    --ct-space-8: 2rem;     /* 32px */\n    --ct-space-10: 2.5rem;  /* 40px */\n    --ct-space-12: 3rem;    /* 48px */\n    --ct-space-16: 4rem;    /* 64px */\n    --ct-space-20: 5rem;    /* 80px */\n    --ct-space-24: 6rem;    /* 96px */\n    --ct-space-32: 8rem;    /* 128px */\n    \n    /* Border Radius */\n    --ct-radius-none: 0;\n    --ct-radius-sm: 0.125rem;  /* 2px */\n    --ct-radius-base: 0.25rem; /* 4px */\n    --ct-radius-md: 0.375rem;  /* 6px */\n    --ct-radius-lg: 0.5rem;    /* 8px */\n    --ct-radius-xl: 0.75rem;   /* 12px */\n    --ct-radius-2xl: 1rem;     /* 16px */\n    --ct-radius-full: 9999px;\n    \n    /* Shadows */\n    --ct-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n    --ct-shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n    --ct-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n    --ct-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n    --ct-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n    \n    /* Transitions */\n    --ct-transition-fast: 150ms ease-in-out;\n    --ct-transition-normal: 250ms ease-in-out;\n    --ct-transition-slow: 350ms ease-in-out;\n    \n    /* Layout */\n    --ct-sidebar-width: 950px;\n    --ct-sidebar-width-lg: 850px;\n    --ct-sidebar-width-md: 700px;\n    --ct-sidebar-width-sm: 100vw;\n    --ct-sidebar-max-height: 800px;\n    \n    /* Z-Index */\n    --ct-z-index-modal: 9999;\n    \n    /* Letter Spacing */\n    --ct-letter-spacing-wide: 1px;\n    \n    /* Legacy compatibility - map old variables to new ones */\n    --primary-color: var(--ct-primary-500);\n    --secondary-color: var(--ct-gray-600);\n    --success-color: var(--ct-success-500);\n    --warning-color: var(--ct-warning-500);\n    --error-color: var(--ct-error-500);\n    --info-color: var(--ct-info-500);\n    \n    --text-primary: var(--ct-gray-900);\n    --text-secondary: var(--ct-gray-600);\n    --text-disabled: var(--ct-gray-400);\n    \n    --background-primary: var(--ct-white);\n    --background-secondary: var(--ct-gray-50);\n    --background-paper: var(--ct-white);\n    \n    --border-color: var(--ct-gray-200);\n    --divider-color: var(--ct-gray-200);\n    \n    --shadow-1: var(--ct-shadow-sm);\n    --shadow-2: var(--ct-shadow-md);\n    --shadow-3: var(--ct-shadow-lg);\n    \n    --border-radius: var(--ct-radius-base);\n    --border-radius-large: var(--ct-radius-lg);\n    \n    --font-family: var(--ct-font-family);\n    --font-size-small: var(--ct-font-size-xs);\n    --font-size-normal: var(--ct-font-size-sm);\n    --font-size-large: var(--ct-font-size-lg);\n    --font-size-xlarge: var(--ct-font-size-xl);\n    \n    --spacing-xs: var(--ct-space-1);\n    --spacing-sm: var(--ct-space-2);\n    --spacing-md: var(--ct-space-4);\n    --spacing-lg: var(--ct-space-6);\n    --spacing-xl: var(--ct-space-8);\n    \n    --transition-fast: var(--ct-transition-fast);\n    --transition-normal: var(--ct-transition-normal);\n    --transition-slow: var(--ct-transition-slow);\n}\n\n/* Apply Inter font globally to ensure consistent typography */\n* {\n    font-family: var(--ct-font-family);\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n/* Optimize text rendering for better readability */\nbody, \n#ct-sidebar,\n.ct-table,\n.ct-results-table {\n    font-family: var(--ct-font-family);\n    text-rendering: optimizeLegibility;\n}/* === CORE LAYOUT === */\n#ct-sidebar {\n    position: fixed;\n    top: 0;\n    right: calc(-1 * var(--ct-sidebar-width));\n    width: var(--ct-sidebar-width);\n    height: 100vh;\n    background-color: var(--ct-white);\n    box-shadow: var(--ct-shadow-xl);\n    z-index: var(--ct-z-index-modal);\n    transition: right var(--ct-transition-normal);\n    font-family: var(--ct-font-family);\n    font-size: var(--ct-font-size-sm);\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    max-height: var(--ct-sidebar-max-height);\n    border-radius: var(--ct-radius-lg) 0 0 var(--ct-radius-lg);\n}\n\n#ct-sidebar.open {\n    right: 0;\n}\n\n/* === SIDEBAR TOGGLE === */\n#ct-sidebar-toggle {\n    position: fixed;\n    top: 50%;\n    right: 0;\n    transform: translateY(-50%);\n    background-color: var(--ct-primary-700);\n    color: var(--ct-white);\n    border: none;\n    height: var(--ct-space-16);\n    width: var(--ct-space-8);\n    border-radius: var(--ct-radius-lg) 0 0 var(--ct-radius-lg);\n    cursor: pointer;\n    writing-mode: vertical-rl;\n    text-orientation: mixed;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: calc(var(--ct-z-index-modal) + 1);\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-bold);\n    letter-spacing: var(--ct-letter-spacing-wide);\n    padding: var(--ct-space-3) var(--ct-space-2);\n    margin-right: var(--ct-space-1);\n    transition: all var(--ct-transition-fast);\n    box-shadow: var(--ct-shadow-md);\n}\n\n#ct-sidebar-toggle:hover {\n    background-color: var(--ct-primary-800);\n    transform: translateY(-50%) translateX(-2px);\n    box-shadow: var(--ct-shadow-lg);\n}\n\n#ct-sidebar-toggle:focus {\n    outline: 3px solid var(--ct-primary-300);\n    outline-offset: 3px;\n}\n\n/* === HEADER AREA === */\n#ct-header {\n    background: linear-gradient(135deg, var(--ct-primary-600) 0%, var(--ct-primary-700) 100%);\n    color: var(--ct-white);\n    padding: var(--ct-space-4);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-shrink: 0;\n    border-bottom: 1px solid var(--ct-primary-800);\n    box-shadow: var(--ct-shadow-sm);\n}\n\n#ct-profile-left {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n}\n\n#ct-profile-right {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n}\n\n#ct-navigation-area {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n}\n\n#ct-nav-back-btn {\n    background: none;\n    border: 1px solid var(--ct-white);\n    color: var(--ct-white);\n    padding: var(--ct-space-2) var(--ct-space-3);\n    border-radius: var(--ct-radius-md);\n    cursor: pointer;\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    transition: all var(--ct-transition-fast);\n    display: none;\n}\n\n#ct-nav-back-btn:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    transform: translateY(-1px);\n}\n\n#ct-nav-title {\n    font-size: var(--ct-font-size-lg);\n    font-weight: var(--ct-font-weight-bold);\n}\n\n#ct-profile-info {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    gap: var(--ct-space-1);\n    text-align: right;\n}\n\n#ct-profile-name {\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-semibold);\n    margin: 0;\n}\n\n#ct-profile-role {\n    font-size: var(--ct-font-size-xs);\n    opacity: 0.9;\n    margin: 0;\n}\n\n.ct-language-buttons {\n    display: flex;\n    gap: var(--ct-space-1);\n    background-color: rgba(255, 255, 255, 0.1);\n    border-radius: var(--ct-radius-md);\n    padding: var(--ct-space-1);\n}\n\n.ct-language-btn {\n    background: none;\n    border: none;\n    color: var(--ct-white);\n    padding: var(--ct-space-1) var(--ct-space-2);\n    border-radius: var(--ct-radius-sm);\n    cursor: pointer;\n    font-size: var(--ct-font-size-xs);\n    font-weight: var(--ct-font-weight-medium);\n    transition: all var(--ct-transition-fast);\n    opacity: 0.7;\n}\n\n.ct-language-btn.active,\n.ct-language-btn:hover {\n    background-color: rgba(255, 255, 255, 0.2);\n    opacity: 1;\n}\n\n/* === SCREEN LAYOUT === */\n.ct-screen {\n    display: none;\n    flex: 1;\n    flex-direction: column;\n    height: 100%;\n}\n\n.ct-screen.active {\n    display: flex;\n}\n\n#ct-my-cases-screen {\n    background-color: var(--ct-gray-50);\n    padding: 0;\n}\n\n#ct-case-details-screen {\n    background-color: var(--ct-white);\n}\n\n#tab-my-cases {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    overflow-y: auto;\n    height: 100%;\n    max-height: calc(100vh - 100px);\n    padding: var(--ct-space-4);\n}\n\n/* === HEADERS === */\n.ct-screen-header {\n    padding: var(--ct-space-4);\n    background-color: var(--ct-gray-800);\n    color: var(--ct-white);\n    font-size: var(--ct-font-size-lg);\n    font-weight: var(--ct-font-weight-bold);\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n    flex-shrink: 0;\n}\n\n#ct-header-area {\n    padding: var(--ct-space-4);\n    background-color: var(--ct-gray-100);\n    color: var(--ct-gray-800);\n    border-bottom: 1px solid var(--ct-gray-200);\n    flex-shrink: 0;\n}\n\n#ct-header-content {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: var(--ct-space-4);\n}\n\n#ct-header-left {\n    flex: 1;\n}\n\n#ct-header-title {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n    margin-bottom: var(--ct-space-2);\n}\n\n#ct-header-initial {\n    width: var(--ct-space-12);\n    height: var(--ct-space-12);\n    background: linear-gradient(135deg, var(--ct-primary-500) 0%, var(--ct-primary-600) 100%);\n    color: var(--ct-white);\n    border-radius: var(--ct-radius-full);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: var(--ct-font-size-lg);\n    font-weight: var(--ct-font-weight-bold);\n    flex-shrink: 0;\n}\n\n#ct-header-title-text {\n    font-size: var(--ct-font-size-xl);\n    font-weight: var(--ct-font-weight-bold);\n    color: var(--ct-gray-900);\n    margin: 0;\n}\n\n#ct-header-subtitle {\n    font-size: var(--ct-font-size-sm);\n    color: var(--ct-gray-600);\n    margin: 0;\n}\n\n#ct-header-actions {\n    display: flex;\n    gap: var(--ct-space-2);\n    align-items: center;\n}\n\n/* === TAB NAVIGATION === */\n#ct-tab-bar {\n    display: flex;\n    background-color: var(--ct-white);\n    border-bottom: 1px solid var(--ct-gray-200);\n    padding: 0 var(--ct-space-4);\n    gap: var(--ct-space-1);\n    flex-shrink: 0;\n}\n\n.ct-tab-button {\n    background: none;\n    border: none;\n    padding: var(--ct-space-3) var(--ct-space-4);\n    cursor: pointer;\n    border-bottom: 3px solid transparent;\n    transition: all var(--ct-transition-fast);\n    color: var(--ct-gray-600);\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    position: relative;\n    white-space: nowrap;\n}\n\n.ct-tab-button:hover {\n    background-color: var(--ct-gray-50);\n    color: var(--ct-gray-800);\n}\n\n.ct-tab-button.active {\n    color: var(--ct-primary-600);\n    border-bottom-color: var(--ct-primary-500);\n    background-color: var(--ct-primary-50);\n}\n\n.ct-tab-button:focus {\n    outline: 2px solid var(--ct-primary-300);\n    outline-offset: -2px;\n}\n\n#ct-tab-content-area {\n    flex: 1;\n    overflow-y: auto;\n    background-color: var(--ct-white);\n    padding: var(--ct-space-4);\n}\n\n.ct-tab-panel {\n    display: none;\n    flex-direction: column;\n    height: 100%;\n    max-height: calc(100vh - 200px);\n    overflow-y: auto;\n}\n\n.ct-tab-panel.active {\n    display: flex;\n}\n\n/* === TABLES === */\n.results-container {\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: auto;\n    padding: 0;\n    margin: var(--ct-space-3) 0;\n    border: var(--ct-space-px) solid var(--ct-gray-200);\n    border-radius: var(--ct-radius-lg);\n    background-color: var(--ct-white);\n    box-shadow: var(--ct-shadow-sm);\n    height: calc(100% - 120px);\n    min-height: var(--ct-space-20);\n    position: relative;\n}\n\n.ct-results-table {\n    width: 100%;\n    border-collapse: collapse;\n    font-size: var(--ct-font-size-sm);\n    background-color: var(--ct-white);\n}\n\n.ct-results-table th {\n    background: linear-gradient(180deg, var(--ct-gray-50) 0%, var(--ct-gray-100) 100%);\n    color: var(--ct-gray-800);\n    font-weight: var(--ct-font-weight-semibold);\n    padding: var(--ct-space-3) var(--ct-space-4);\n    text-align: left;\n    border-bottom: 2px solid var(--ct-gray-200);\n    font-size: var(--ct-font-size-xs);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n}\n\n.ct-results-table td {\n    padding: var(--ct-space-3) var(--ct-space-4);\n    border-bottom: 1px solid var(--ct-gray-100);\n    color: var(--ct-gray-700);\n    font-size: var(--ct-font-size-sm);\n    vertical-align: top;\n}\n\n.ct-results-table tbody tr {\n    transition: background-color var(--ct-transition-fast);\n    cursor: pointer;\n}\n\n.ct-results-table tbody tr:hover {\n    background-color: var(--ct-primary-50);\n}\n\n.ct-results-table tbody tr:nth-child(even) {\n    background-color: var(--ct-gray-25);\n}\n\n.ct-results-table tbody tr:nth-child(even):hover {\n    background-color: var(--ct-primary-50);\n}\n\n/* === BUTTONS === */\n.ct-btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: var(--ct-space-2);\n    padding: var(--ct-space-2) var(--ct-space-4);\n    border: 1px solid transparent;\n    border-radius: var(--ct-radius-md);\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    text-decoration: none;\n    cursor: pointer;\n    transition: all var(--ct-transition-fast);\n    white-space: nowrap;\n}\n\n.ct-btn-primary {\n    background-color: var(--ct-primary-500);\n    color: var(--ct-white);\n    border-color: var(--ct-primary-500);\n}\n\n.ct-btn-primary:hover {\n    background-color: var(--ct-primary-600);\n    border-color: var(--ct-primary-600);\n    transform: translateY(-1px);\n    box-shadow: var(--ct-shadow-md);\n}\n\n.ct-btn-secondary {\n    background-color: var(--ct-white);\n    color: var(--ct-gray-700);\n    border-color: var(--ct-gray-300);\n}\n\n.ct-btn-secondary:hover {\n    background-color: var(--ct-gray-50);\n    border-color: var(--ct-gray-400);\n}\n\n.ct-btn-sm {\n    padding: var(--ct-space-1) var(--ct-space-3);\n    font-size: var(--ct-font-size-xs);\n}\n\n/* === BADGES === */\n.ct-badge {\n    display: inline-flex;\n    align-items: center;\n    padding: var(--ct-space-1) var(--ct-space-2);\n    border-radius: var(--ct-radius-full);\n    font-size: var(--ct-font-size-xs);\n    font-weight: var(--ct-font-weight-medium);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.ct-badge-success {\n    background-color: var(--ct-success-100);\n    color: var(--ct-success-700);\n}\n\n.ct-badge-warning {\n    background-color: var(--ct-warning-100);\n    color: var(--ct-warning-700);\n}\n\n.ct-badge-error {\n    background-color: var(--ct-error-100);\n    color: var(--ct-error-700);\n}\n\n.ct-badge-info {\n    background-color: var(--ct-info-100);\n    color: var(--ct-info-700);\n}\n\n/* === LOADING STATES === */\n.ct-loading {\n    text-align: center;\n    padding: var(--ct-space-8);\n    color: var(--ct-gray-500);\n    font-size: var(--ct-font-size-sm);\n}\n\n.ct-error {\n    background-color: var(--ct-error-50);\n    color: var(--ct-error-700);\n    padding: var(--ct-space-4);\n    border-radius: var(--ct-radius-md);\n    margin-bottom: var(--ct-space-4);\n    border-left: 4px solid var(--ct-error-500);\n    font-size: var(--ct-font-size-sm);\n}\n\n/* === FILTERS === */\n.filter-container {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-3);\n    padding: var(--ct-space-4);\n    background-color: var(--ct-gray-50);\n    border-bottom: 1px solid var(--ct-gray-200);\n    flex-wrap: wrap;\n}\n\n.filter-group {\n    display: flex;\n    align-items: center;\n    gap: var(--ct-space-2);\n}\n\n.filter-label {\n    font-size: var(--ct-font-size-sm);\n    font-weight: var(--ct-font-weight-medium);\n    color: var(--ct-gray-700);\n    white-space: nowrap;\n}\n\n.filter-select {\n    padding: var(--ct-space-2) var(--ct-space-3);\n    border: 1px solid var(--ct-gray-300);\n    border-radius: var(--ct-radius-md);\n    font-size: var(--ct-font-size-sm);\n    background-color: var(--ct-white);\n    color: var(--ct-gray-700);\n    min-width: 120px;\n}\n\n.filter-select:focus {\n    outline: 2px solid var(--ct-primary-300);\n    border-color: var(--ct-primary-500);\n}\n\n/* === SHIMMER LOADING === */\n@keyframes ct-shimmer {\n    0% { background-position: -200% 0; }\n    100% { background-position: 200% 0; }\n}\n\n.ct-skeleton {\n    background: linear-gradient(\n        90deg,\n        var(--ct-gray-100) 25%,\n        var(--ct-gray-200) 50%,\n        var(--ct-gray-100) 75%\n    );\n    background-size: 200% 100%;\n    animation: ct-shimmer 1.5s infinite;\n    border-radius: var(--ct-radius-sm);\n}\n\n.ct-skeleton--text {\n    height: 1em;\n    margin: 0.25em 0;\n}\n\n.ct-skeleton--title {\n    height: 1.5em;\n    margin: 0.5em 0;\n}\n\n.ct-skeleton--button {\n    height: 2.5em;\n    width: 6em;\n}\n\n/* === CLEAN UI - HIDE SCROLLBARS === */\n#ct-sidebar,\n.ct-tab-panel,\n#ct-tab-content-area,\n.results-container,\n#tab-my-cases,\n.ct-results-table-container {\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n}\n\n#ct-sidebar::-webkit-scrollbar,\n.ct-tab-panel::-webkit-scrollbar,\n#ct-tab-content-area::-webkit-scrollbar,\n.results-container::-webkit-scrollbar,\n#tab-my-cases::-webkit-scrollbar,\n.ct-results-table-container::-webkit-scrollbar {\n    display: none;\n}\n\n/* === LEGACY COMPATIBILITY === */\n.coretabs-sidebar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: var(--ct-sidebar-width);\n  height: 100vh;\n  background-color: var(--ct-white);\n  box-shadow: var(--ct-shadow-lg);\n  z-index: var(--ct-z-sidebar);\n  transition: transform var(--ct-transition-normal);\n  transform: translateX(-100%);\n  font-family: var(--ct-font-family);\n  display: flex;\n  flex-direction: column;\n}\n\n.coretabs-header {\n  background-color: var(--ct-gray-100);\n  color: var(--ct-gray-800);\n  padding: var(--ct-space-4);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid var(--ct-gray-200);\n  flex-shrink: 0;\n}\n\n.coretabs-content {\n  flex: 1;\n  overflow-y: auto;\n  background-color: var(--ct-white);\n  padding: var(--ct-space-4);\n}\n\n.coretabs-toggle {\n  position: fixed;\n  top: var(--ct-space-4);\n  left: var(--ct-space-4);\n  background-color: var(--ct-primary-600);\n  color: var(--ct-white);\n  border: none;\n  width: var(--ct-space-10);\n  height: var(--ct-space-10);\n  border-radius: var(--ct-radius-md);\n  cursor: pointer;\n  box-shadow: var(--ct-shadow-md);\n  z-index: var(--ct-z-toggle);\n  transition: all var(--ct-transition-fast);\n}\n\n.coretabs-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: var(--ct-font-size-sm);\n  background-color: var(--ct-white);\n}\n\n.coretabs-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--ct-space-8);\n  color: var(--ct-gray-600);\n  font-size: var(--ct-font-size-sm);\n}\n\n.coretabs-error {\n  background-color: var(--ct-error-50);\n  border: 1px solid var(--ct-error-200);\n  color: var(--ct-error-700);\n  padding: var(--ct-space-4);\n  border-radius: var(--ct-radius-md);\n  margin: var(--ct-space-4) 0;\n}/* === RESPONSIVE DESIGN === */\n\n/* Large screens (1200px and up) */\n@media (min-width: 1200px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width);\n        right: calc(-1 * var(--ct-sidebar-width));\n    }\n}\n\n/* Medium screens (992px to 1199px) */\n@media (max-width: 1199px) and (min-width: 992px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width-lg);\n        right: calc(-1 * var(--ct-sidebar-width-lg));\n    }\n}\n\n/* Small screens (768px to 991px) */\n@media (max-width: 991px) and (min-width: 768px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width-md);\n        right: calc(-1 * var(--ct-sidebar-width-md));\n    }\n    \n    #ct-header {\n        padding: var(--ct-space-3);\n    }\n    \n    #ct-navigation-area {\n        flex-direction: column;\n        align-items: flex-start;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-right {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-info {\n        align-items: flex-start;\n        text-align: left;\n    }\n    \n    .ct-language-buttons {\n        justify-content: center;\n    }\n    \n    #ct-tab-bar {\n        flex-wrap: wrap;\n    }\n    \n    .ct-tab-button {\n        flex: 1;\n        min-width: 0;\n        padding: var(--ct-space-2);\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-tab-content-area {\n        padding: var(--ct-space-2);\n    }\n    \n    .filter-container {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n    }\n    \n    .filter-group {\n        justify-content: space-between;\n    }\n    \n    .filter-select {\n        min-width: 100px;\n    }\n}\n\n/* Extra small screens (up to 767px) */\n@media (max-width: 767px) {\n    #ct-sidebar {\n        width: var(--ct-sidebar-width-sm);\n        right: calc(-1 * var(--ct-sidebar-width-sm));\n        border-radius: 0;\n    }\n    \n    #ct-sidebar-toggle {\n        top: var(--ct-space-4);\n        right: var(--ct-space-4);\n        width: var(--ct-space-12);\n        height: var(--ct-space-12);\n        border-radius: var(--ct-radius-full);\n        writing-mode: initial;\n        text-orientation: initial;\n        font-size: var(--ct-font-size-lg);\n        padding: 0;\n        margin-right: 0;\n    }\n    \n    #ct-header {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-3);\n        padding: var(--ct-space-3);\n    }\n    \n    #ct-navigation-area {\n        flex-direction: column;\n        align-items: flex-start;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-right {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-profile-info {\n        align-items: flex-start;\n        text-align: left;\n    }\n    \n    .ct-language-buttons {\n        justify-content: center;\n    }\n    \n    #ct-tab-bar {\n        flex-wrap: wrap;\n        padding: 0 var(--ct-space-2);\n    }\n    \n    .ct-tab-button {\n        flex: 1;\n        min-width: 0;\n        padding: var(--ct-space-2);\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-tab-content-area {\n        padding: var(--ct-space-2);\n    }\n    \n    .filter-container {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-2);\n        padding: var(--ct-space-2);\n    }\n    \n    .filter-group {\n        flex-direction: column;\n        align-items: stretch;\n        gap: var(--ct-space-1);\n    }\n    \n    .filter-select {\n        width: 100%;\n        min-width: auto;\n    }\n    \n    .ct-results-table {\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    .ct-results-table th,\n    .ct-results-table td {\n        padding: var(--ct-space-2);\n    }\n    \n    .ct-btn {\n        width: 100%;\n        justify-content: center;\n    }\n    \n    .ct-btn-sm {\n        padding: var(--ct-space-2);\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-header-content {\n        flex-direction: column;\n        gap: var(--ct-space-2);\n    }\n    \n    #ct-header-actions {\n        flex-direction: column;\n        width: 100%;\n        gap: var(--ct-space-1);\n    }\n    \n    .results-container {\n        margin: var(--ct-space-2) 0;\n        height: calc(100% - 80px);\n    }\n}\n\n/* Ultra small screens (up to 480px) */\n@media (max-width: 480px) {\n    #ct-sidebar-toggle {\n        top: var(--ct-space-2);\n        right: var(--ct-space-2);\n        width: var(--ct-space-10);\n        height: var(--ct-space-10);\n        font-size: var(--ct-font-size-base);\n    }\n    \n    #ct-header {\n        padding: var(--ct-space-2);\n    }\n    \n    #ct-nav-title {\n        font-size: var(--ct-font-size-base);\n    }\n    \n    #ct-profile-name {\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-profile-role {\n        font-size: 10px;\n    }\n    \n    .ct-language-btn {\n        padding: var(--ct-space-1);\n        font-size: 10px;\n    }\n    \n    #ct-tab-bar {\n        padding: 0 var(--ct-space-1);\n    }\n    \n    .ct-tab-button {\n        padding: var(--ct-space-1) var(--ct-space-2);\n        font-size: 10px;\n    }\n    \n    #ct-tab-content-area {\n        padding: var(--ct-space-1);\n    }\n    \n    .filter-container {\n        padding: var(--ct-space-1);\n    }\n    \n    .ct-results-table {\n        font-size: 10px;\n    }\n    \n    .ct-results-table th,\n    .ct-results-table td {\n        padding: var(--ct-space-1);\n    }\n    \n    #ct-header-title-text {\n        font-size: var(--ct-font-size-lg);\n    }\n    \n    #ct-header-subtitle {\n        font-size: var(--ct-font-size-xs);\n    }\n    \n    #ct-header-initial {\n        width: var(--ct-space-10);\n        height: var(--ct-space-10);\n        font-size: var(--ct-font-size-base);\n    }\n}\n\n/* Print styles */\n@media print {\n    #ct-sidebar,\n    #ct-sidebar-toggle {\n        display: none !important;\n    }\n    \n    .ct-results-table {\n        font-size: 10px;\n    }\n    \n    .ct-results-table th,\n    .ct-results-table td {\n        padding: var(--ct-space-1);\n        border: 1px solid var(--ct-gray-300);\n    }\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n    #ct-sidebar {\n        border: 2px solid var(--ct-gray-900);\n    }\n    \n    .ct-tab-button.active {\n        border-bottom-width: 4px;\n    }\n    \n    .ct-results-table th {\n        border-bottom-width: 3px;\n    }\n    \n    .ct-btn {\n        border-width: 2px;\n    }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n    * {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n    }\n    \n    #ct-sidebar-toggle:hover {\n        transform: none;\n    }\n    \n    .ct-btn-primary:hover {\n        transform: none;\n    }\n}\n\n/* Dark mode support (if implemented) */\n@media (prefers-color-scheme: dark) {\n    :root {\n        --ct-white: #1a1a1a;\n        --ct-gray-50: #2a2a2a;\n        --ct-gray-100: #3a3a3a;\n        --ct-gray-900: #f0f0f0;\n    }\n}\n\n/* Legacy compatibility */\n@media (max-width: 768px) {\n    .coretabs-sidebar {\n        width: 100vw;\n        right: -100vw;\n    }\n    \n    .coretabs-sidebar.open {\n        right: 0;\n    }\n    \n    .coretabs-toggle {\n        top: 10px;\n        right: 10px;\n        width: 40px;\n        height: 40px;\n        font-size: var(--font-size-normal);\n    }\n    \n    .coretabs-content {\n        padding: var(--spacing-sm);\n    }\n    \n    .coretabs-table {\n        font-size: 11px;\n    }\n    \n    .coretabs-table th,\n    .coretabs-table td {\n        padding: var(--spacing-xs);\n    }\n}\n\n@media (max-width: 480px) {\n    .coretabs-header {\n        padding: var(--spacing-sm);\n    }\n    \n    .coretabs-title {\n        font-size: var(--font-size-normal);\n    }\n    \n    .coretabs-tabs {\n        flex-wrap: wrap;\n    }\n    \n    .coretabs-tab {\n        flex: 1;\n        min-width: 80px;\n        padding: var(--spacing-xs) var(--spacing-sm);\n        font-size: var(--font-size-small);\n    }\n}",document.head.appendChild(t)}async init(){if(!this.initialized)try{this.initializeState(),this.createUI(),this.initializeEventHandlers(),await this.fetchInitialData(),this.initialized=!0}catch(t){}}createUI(){U(),function(){const t=document.getElementById("coretabs-sidebar");t&&t.remove(),U();const n=document.createElement("div");n.id="coretabs-sidebar",n.className="coretabs-sidebar";const e=document.createElement("div");e.className="coretabs-header",e.id="ct-header";const a=document.createElement("div");a.className="ct-nav",a.id="ct-nav";const r=document.createElement("button");r.id="ct-nav-back-btn",r.className="ct-nav-back-btn",r.textContent=p("back"),r.style.display="none";const c=document.createElement("h2");c.id="ct-nav-title",c.className="ct-nav-title",c.textContent=p("my_cases");const o=document.createElement("select");o.id="ct-language-select",o.className="ct-language-select";const i=document.createElement("option");i.value="en",i.textContent="English";const s=document.createElement("option");s.value="id",s.textContent="Bahasa Indonesia",o.appendChild(i),o.appendChild(s),a.appendChild(r),a.appendChild(c),a.appendChild(o);const d=document.createElement("div");d.className="ct-header-title",d.id="ct-header-title";const l=document.createElement("h3");l.id="ct-header-title-text",l.textContent=p("no_case_selected");const m=document.createElement("p");m.id="ct-header-subtitle",m.textContent=p("select_case_message"),d.appendChild(l),d.appendChild(m);const u=document.createElement("div");u.className="ct-tab-buttons",u.id="ct-tab-buttons",[{id:"tab-profile",key:"profile"},{id:"tab-docs",key:"documents"},{id:"tab-users",key:"users"},{id:"tab-refund",key:"refund_review"},{id:"tab-routing",key:"routing"}].forEach(t=>{const n=document.createElement("button");n.className="ct-tab-button",n.dataset.tab=t.id,n.textContent=p(t.key),u.appendChild(n)}),e.appendChild(a),e.appendChild(d),e.appendChild(u);const g=document.createElement("div");g.className="ct-content",g.id="ct-content";const h=document.createElement("div");h.className="ct-loading-message",h.textContent=p("loading_my_cases"),g.appendChild(h),n.appendChild(e),n.appendChild(g),document.body.appendChild(n)}()}initializeEventHandlers(){O()}initializeState(){t.set("currentScreen","cases"),t.set("currentTab","profile"),t.set("sidebarOpen",!1),t.set("selectedCaseId",null),t.set("currentLanguage","en"),t.set("allMyCases",[]),t.set("allCaseDocuments",[]),t.set("allCaseUsers",[]),t.set("refundReviewData",[]),t.set("filteredRefundData",[]),t.set("routingData",null),t.set("workflowDiagram",null),t.set("loadedCasesForCaseId",null),t.set("loadedDocumentsForCaseId",null),t.set("loadedUsersForCaseId",null),t.set("loadedRefundForCaseId",null),t.set("loadedRoutingForCaseId",null)}async fetchInitialData(){try{const n=await o();n&&n.data&&t.set("allMyCases",n.data)}catch(t){}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{(new V).init()}):(new V).init()})();